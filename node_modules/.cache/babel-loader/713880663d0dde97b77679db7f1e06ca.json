{"ast":null,"code":"/*\nCopyright (c) 2020-present NAVER Corp.\nname: @egjs/imready\nlicense: MIT\nauthor: NAVER Corp.\nrepository: https://github.com/naver/egjs-imready\nversion: 1.2.0\n*/\nimport Component from '@egjs/component';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar _extendStatics = function extendStatics(d, b) {\n  _extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    }\n  };\n\n  return _extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  _extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar _assign = function __assign() {\n  _assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return _assign.apply(this, arguments);\n};\n\nfunction __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) {\n    s += arguments[i].length;\n  }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) {\n    for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) {\n      r[k] = a[j];\n    }\n  }\n\n  return r;\n}\n/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\n\n\nvar isWindow = typeof window !== \"undefined\";\nvar ua = isWindow ? window.navigator.userAgent : \"\";\nvar SUPPORT_COMPUTEDSTYLE = isWindow ? !!(\"getComputedStyle\" in window) : false;\nvar IS_IE = /MSIE|Trident|Windows Phone|Edge/.test(ua);\nvar SUPPORT_ADDEVENTLISTENER = isWindow ? !!(\"addEventListener\" in document) : false;\nvar WIDTH = \"width\";\nvar HEIGHT = \"height\";\nvar PROPS = [\"prefix\", \"loaders\"];\nvar EVENTS = [\"preReadyElement\", \"readyElement\", \"error\", \"preReady\", \"ready\"];\n\nfunction getAttribute(el, name) {\n  return el.getAttribute(name) || \"\";\n}\n\nfunction toArray(arr) {\n  return [].slice.call(arr);\n}\n\nfunction hasSizeAttribute(target, prefix) {\n  if (prefix === void 0) {\n    prefix = \"data-\";\n  }\n\n  return !!target.getAttribute(prefix + \"width\");\n}\n\nfunction hasLoadingAttribute(target) {\n  return \"loading\" in target && target.getAttribute(\"loading\") === \"lazy\";\n}\n\nfunction hasSkipAttribute(target, prefix) {\n  if (prefix === void 0) {\n    prefix = \"data-\";\n  }\n\n  return !!target.getAttribute(prefix + \"skip\");\n}\n\nfunction addEvent(element, type, handler) {\n  if (SUPPORT_ADDEVENTLISTENER) {\n    element.addEventListener(type, handler, false);\n  } else if (element.attachEvent) {\n    element.attachEvent(\"on\" + type, handler);\n  } else {\n    element[\"on\" + type] = handler;\n  }\n}\n\nfunction removeEvent(element, type, handler) {\n  if (element.removeEventListener) {\n    element.removeEventListener(type, handler, false);\n  } else if (element.detachEvent) {\n    element.detachEvent(\"on\" + type, handler);\n  } else {\n    element[\"on\" + type] = null;\n  }\n}\n\nfunction innerWidth(el) {\n  return getSize(el, \"Width\");\n}\n\nfunction innerHeight(el) {\n  return getSize(el, \"Height\");\n}\n\nfunction getStyles(el) {\n  return (SUPPORT_COMPUTEDSTYLE ? window.getComputedStyle(el) : el.currentStyle) || {};\n}\n\nfunction getSize(el, name) {\n  var size = el[\"client\" + name] || el[\"offset\" + name];\n  return parseFloat(size || getStyles(el)[name.toLowerCase()]) || 0;\n}\n\nfunction getContentElements(element, tags, prefix) {\n  var skipElements = toArray(element.querySelectorAll(__spreadArrays([\"[\" + prefix + \"skip] [\" + prefix + \"width]\"], tags.map(function (tag) {\n    return [\"[\" + prefix + \"skip] \" + tag, tag + \"[\" + prefix + \"skip]\", \"[\" + prefix + \"width] \" + tag].join(\", \");\n  })).join(\", \")));\n  return toArray(element.querySelectorAll(\"[\" + prefix + \"width], \" + tags.join(\", \"))).filter(function (el) {\n    return skipElements.indexOf(el) === -1;\n  });\n}\n/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\n\n\nvar elements = [];\n\nfunction addAutoSizer(element, prefix) {\n  !elements.length && addEvent(window, \"resize\", resizeAllAutoSizers);\n  element.__PREFIX__ = prefix;\n  elements.push(element);\n  resize(element);\n}\n\nfunction removeAutoSizer(element, prefix) {\n  var index = elements.indexOf(element);\n\n  if (index < 0) {\n    return;\n  }\n\n  var fixed = getAttribute(element, prefix + \"fixed\");\n  delete element.__PREFIX__;\n  element.style[fixed === HEIGHT ? WIDTH : HEIGHT] = \"\";\n  elements.splice(index, 1);\n  !elements.length && removeEvent(window, \"resize\", resizeAllAutoSizers);\n}\n\nfunction resize(element, prefix) {\n  if (prefix === void 0) {\n    prefix = \"data-\";\n  }\n\n  var elementPrefix = element.__PREFIX__ || prefix;\n  var dataWidth = parseInt(getAttribute(element, \"\" + elementPrefix + WIDTH), 10) || 0;\n  var dataHeight = parseInt(getAttribute(element, \"\" + elementPrefix + HEIGHT), 10) || 0;\n  var fixed = getAttribute(element, elementPrefix + \"fixed\");\n\n  if (fixed === HEIGHT) {\n    var size = innerHeight(element) || dataHeight;\n    element.style[WIDTH] = dataWidth / dataHeight * size + \"px\";\n  } else {\n    var size = innerWidth(element) || dataWidth;\n    element.style[HEIGHT] = dataHeight / dataWidth * size + \"px\";\n  }\n}\n\nfunction resizeAllAutoSizers() {\n  elements.forEach(function (element) {\n    resize(element);\n  });\n}\n\nvar Loader = /*#__PURE__*/function (_super) {\n  __extends(Loader, _super);\n\n  function Loader(element, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.isReady = false;\n    _this.isPreReady = false;\n    _this.hasDataSize = false;\n    _this.hasLoading = false;\n    _this.isSkip = false;\n\n    _this.onCheck = function (e) {\n      _this.clear();\n\n      if (e && e.type === \"error\") {\n        _this.onError(_this.element);\n      } // I'm pre-ready and ready!\n\n\n      var withPreReady = !_this.hasDataSize && !_this.hasLoading;\n\n      _this.onReady(withPreReady);\n    };\n\n    _this.options = _assign({\n      prefix: \"data-\"\n    }, options);\n    _this.element = element;\n    var prefix = _this.options.prefix;\n    _this.hasDataSize = hasSizeAttribute(element, prefix);\n    _this.isSkip = hasSkipAttribute(element, prefix);\n    _this.hasLoading = hasLoadingAttribute(element);\n    return _this;\n  }\n\n  var __proto = Loader.prototype;\n\n  __proto.check = function () {\n    if (this.isSkip || !this.checkElement()) {\n      // I'm Ready\n      this.onAlreadyReady(true);\n      return false;\n    }\n\n    if (this.hasDataSize) {\n      addAutoSizer(this.element, this.options.prefix);\n    }\n\n    if (this.hasDataSize || this.hasLoading) {\n      // I'm Pre Ready\n      this.onAlreadyPreReady();\n    } // Wati Pre Ready, Ready\n\n\n    return true;\n  };\n\n  __proto.addEvents = function () {\n    var _this = this;\n\n    var element = this.element;\n    this.constructor.EVENTS.forEach(function (name) {\n      addEvent(element, name, _this.onCheck);\n    });\n  };\n\n  __proto.clear = function () {\n    var _this = this;\n\n    var element = this.element;\n    this.constructor.EVENTS.forEach(function (name) {\n      removeEvent(element, name, _this.onCheck);\n    });\n    this.removeAutoSizer();\n  };\n\n  __proto.destroy = function () {\n    this.clear();\n    this.off();\n  };\n\n  __proto.removeAutoSizer = function () {\n    if (this.hasDataSize) {\n      // I'm already ready.\n      var prefix = this.options.prefix;\n      removeAutoSizer(this.element, prefix);\n    }\n  };\n\n  __proto.onError = function (target) {\n    this.trigger(\"error\", {\n      element: this.element,\n      target: target\n    });\n  };\n\n  __proto.onPreReady = function () {\n    if (this.isPreReady) {\n      return;\n    }\n\n    this.isPreReady = true;\n    this.trigger(\"preReady\", {\n      element: this.element,\n      hasLoading: this.hasLoading,\n      isSkip: this.isSkip\n    });\n  };\n\n  __proto.onReady = function (withPreReady) {\n    if (this.isReady) {\n      return;\n    }\n\n    withPreReady = !this.isPreReady && withPreReady;\n\n    if (withPreReady) {\n      this.isPreReady = true;\n    }\n\n    this.removeAutoSizer();\n    this.isReady = true;\n    this.trigger(\"ready\", {\n      element: this.element,\n      withPreReady: withPreReady,\n      hasLoading: this.hasLoading,\n      isSkip: this.isSkip\n    });\n  };\n\n  __proto.onAlreadyError = function (target) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.onError(target);\n    });\n  };\n\n  __proto.onAlreadyPreReady = function () {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.onPreReady();\n    });\n  };\n\n  __proto.onAlreadyReady = function (withPreReady) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.onReady(withPreReady);\n    });\n  };\n\n  Loader.EVENTS = [];\n  return Loader;\n}(Component);\n\nvar ElementLoader = /*#__PURE__*/function (_super) {\n  __extends(ElementLoader, _super);\n\n  function ElementLoader() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = ElementLoader.prototype;\n\n  __proto.setHasLoading = function (hasLoading) {\n    this.hasLoading = hasLoading;\n  };\n\n  __proto.check = function () {\n    if (this.isSkip) {\n      // I'm Ready\n      this.onAlreadyReady(true);\n      return false;\n    }\n\n    if (this.hasDataSize) {\n      addAutoSizer(this.element, this.options.prefix);\n      this.onAlreadyPreReady();\n    } else {\n      // has not data size\n      this.trigger(\"requestChildren\");\n    }\n\n    return true;\n  };\n\n  __proto.checkElement = function () {\n    return true;\n  };\n\n  __proto.destroy = function () {\n    this.clear();\n    this.trigger(\"requestDestroy\");\n    this.off();\n  };\n\n  __proto.onAlreadyPreReady = function () {\n    // has data size\n    _super.prototype.onAlreadyPreReady.call(this);\n\n    this.trigger(\"reqeustReadyChildren\");\n  };\n\n  ElementLoader.EVENTS = [];\n  return ElementLoader;\n}(Loader);\n/**\n * @alias eg.ImReady\n * @extends eg.Component\n */\n\n\nvar ImReadyManager = /*#__PURE__*/function (_super) {\n  __extends(ImReadyManager, _super);\n  /**\n   * @param - ImReady's options\n   */\n\n\n  function ImReadyManager(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var _this = _super.call(this) || this;\n\n    _this.readyCount = 0;\n    _this.preReadyCount = 0;\n    _this.totalCount = 0;\n    _this.totalErrorCount = 0;\n    _this.isPreReadyOver = true;\n    _this.elementInfos = [];\n    _this.options = _assign({\n      loaders: {},\n      prefix: \"data-\"\n    }, options);\n    return _this;\n  }\n  /**\n   * Checks whether elements are in the ready state.\n   * @ko 엘리먼트가 준비 상태인지 체크한다.\n   * @elements - Elements to check ready status. <ko> 준비 상태를 체크할 엘리먼트들.</ko>\n   * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReadyElement: e => {\n     *     // 1, 3\n     *     // 2, 3\n     *     // 3, 3\n     *     console.log(e.preReadyCount, e.totalCount),\n     *   },\n     * });\n     * ```\n   */\n\n\n  var __proto = ImReadyManager.prototype;\n\n  __proto.check = function (elements) {\n    var _this = this;\n\n    var prefix = this.options.prefix;\n    this.clear();\n    this.elementInfos = toArray(elements).map(function (element, index) {\n      var loader = _this.getLoader(element, {\n        prefix: prefix\n      });\n\n      loader.check();\n      loader.on(\"error\", function (e) {\n        _this.onError(index, e.target);\n      }).on(\"preReady\", function (e) {\n        var info = _this.elementInfos[index];\n        info.hasLoading = e.hasLoading;\n        info.isSkip = e.isSkip;\n\n        var isPreReady = _this.checkPreReady(index);\n\n        _this.onPreReadyElement(index);\n\n        isPreReady && _this.onPreReady();\n      }).on(\"ready\", function (_a) {\n        var withPreReady = _a.withPreReady,\n            hasLoading = _a.hasLoading,\n            isSkip = _a.isSkip;\n        var info = _this.elementInfos[index];\n        info.hasLoading = hasLoading;\n        info.isSkip = isSkip;\n\n        var isPreReady = withPreReady && _this.checkPreReady(index);\n\n        var isReady = _this.checkReady(index); // Pre-ready and ready occur simultaneously\n\n\n        withPreReady && _this.onPreReadyElement(index);\n\n        _this.onReadyElement(index);\n\n        isPreReady && _this.onPreReady();\n        isReady && _this.onReady();\n      });\n      return {\n        loader: loader,\n        element: element,\n        hasLoading: false,\n        hasError: false,\n        isPreReady: false,\n        isReady: false,\n        isSkip: false\n      };\n    });\n    var length = this.elementInfos.length;\n    this.totalCount = length;\n\n    if (!length) {\n      setTimeout(function () {\n        _this.onPreReady();\n\n        _this.onReady();\n      });\n    }\n\n    return this;\n  };\n  /**\n   * Gets the total count of elements to be checked.\n   * @ko 체크하는 element의 총 개수를 가져온다.\n   */\n\n\n  __proto.getTotalCount = function () {\n    return this.totalCount;\n  };\n  /**\n   * Whether the elements are all pre-ready. (all sizes are known)\n   * @ko 엘리먼트들이 모두 사전 준비가 됐는지 (사이즈를 전부 알 수 있는지) 여부.\n   */\n\n\n  __proto.isPreReady = function () {\n    return this.elementInfos.every(function (info) {\n      return info.isPreReady;\n    });\n  };\n  /**\n   * Whether the elements are all ready.\n   * @ko 엘리먼트들이 모두 준비가 됐는지 여부.\n   */\n\n\n  __proto.isReady = function () {\n    return this.elementInfos.every(function (info) {\n      return info.isReady;\n    });\n  };\n  /**\n   * Whether an error has occurred in the elements in the current state.\n   * @ko 현재 상태에서 엘리먼트들이 에러가 발생했는지 여부.\n   */\n\n\n  __proto.hasError = function () {\n    return this.totalErrorCount > 0;\n  };\n  /**\n   * Clears events of elements being checked.\n   * @ko 체크 중인 엘리먼트들의 이벤트를 해제 한다.\n   */\n\n\n  __proto.clear = function () {\n    this.isPreReadyOver = false;\n    this.totalCount = 0;\n    this.preReadyCount = 0;\n    this.readyCount = 0;\n    this.totalErrorCount = 0;\n    this.elementInfos.forEach(function (info) {\n      if (!info.isReady && info.loader) {\n        info.loader.destroy();\n      }\n    });\n    this.elementInfos = [];\n  };\n  /**\n   * Destory all events.\n   * @ko 모든 이벤트를 해제 한다.\n   */\n\n\n  __proto.destroy = function () {\n    this.clear();\n    this.off();\n  };\n\n  __proto.getLoader = function (element, options) {\n    var _this = this;\n\n    var tagName = element.tagName.toLowerCase();\n    var loaders = this.options.loaders;\n    var tags = Object.keys(loaders);\n\n    if (loaders[tagName]) {\n      return new loaders[tagName](element, options);\n    }\n\n    var loader = new ElementLoader(element, options);\n    var children = toArray(element.querySelectorAll(tags.join(\", \")));\n    loader.setHasLoading(children.some(function (el) {\n      return hasLoadingAttribute(el);\n    }));\n    var withPreReady = false;\n    var childrenImReady = this.clone().on(\"error\", function (e) {\n      loader.onError(e.target);\n    }).on(\"ready\", function () {\n      loader.onReady(withPreReady);\n    });\n    loader.on(\"requestChildren\", function () {\n      // has not data size\n      var contentElements = getContentElements(element, tags, _this.options.prefix);\n      childrenImReady.check(contentElements).on(\"preReady\", function (e) {\n        withPreReady = e.isReady;\n\n        if (!withPreReady) {\n          loader.onPreReady();\n        }\n      });\n    }).on(\"reqeustReadyChildren\", function () {\n      // has data size\n      // loader call preReady\n      // check only video, image elements\n      childrenImReady.check(children);\n    }).on(\"requestDestroy\", function () {\n      childrenImReady.destroy();\n    });\n    return loader;\n  };\n\n  __proto.clone = function () {\n    return new ImReadyManager(_assign({}, this.options));\n  };\n\n  __proto.checkPreReady = function (index) {\n    this.elementInfos[index].isPreReady = true;\n    ++this.preReadyCount;\n\n    if (this.preReadyCount < this.totalCount) {\n      return false;\n    }\n\n    return true;\n  };\n\n  __proto.checkReady = function (index) {\n    this.elementInfos[index].isReady = true;\n    ++this.readyCount;\n\n    if (this.readyCount < this.totalCount) {\n      return false;\n    }\n\n    return true;\n  };\n\n  __proto.onError = function (index, target) {\n    var info = this.elementInfos[index];\n    info.hasError = true;\n    /**\n     * An event occurs if the image, video fails to load.\n     * @ko 이미지, 비디오가 로딩에 실패하면 이벤트가 발생한다.\n     * @event eg.ImReady#error\n     * @param {eg.ImReady.OnError} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\"/>\n     *    <img src=\"ERR\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check([document.querySelector(\"div\")]).on({\n     *   error: e => {\n     *     // <div>...</div>, 0, <img src=\"ERR\"/>\n     *     console.log(e.element, e.index, e.target),\n     *   },\n     * });\n     * ```\n     */\n\n    this.trigger(\"error\", {\n      element: info.element,\n      index: index,\n      target: target,\n      errorCount: this.getErrorCount(),\n      totalErrorCount: ++this.totalErrorCount\n    });\n  };\n\n  __proto.onPreReadyElement = function (index) {\n    var info = this.elementInfos[index];\n    /**\n     * An event occurs when the element is pre-ready (when the loading attribute is applied or the size is known)\n     * @ko 해당 엘리먼트가 사전 준비되었을 때(loading 속성이 적용되었거나 사이즈를 알 수 있을 때) 이벤트가 발생한다.\n     * @event eg.ImReady#preReadyElement\n     * @param {eg.ImReady.OnPreReadyElement} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReadyElement: e => {\n     *     // 1, 3\n     *     // 2, 3\n     *     // 3, 3\n     *     console.log(e.preReadyCount, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n\n    this.trigger(\"preReadyElement\", {\n      element: info.element,\n      index: index,\n      preReadyCount: this.preReadyCount,\n      readyCount: this.readyCount,\n      totalCount: this.totalCount,\n      isPreReady: this.isPreReady(),\n      isReady: this.isReady(),\n      hasLoading: info.hasLoading,\n      isSkip: info.isSkip\n    });\n  };\n\n  __proto.onPreReady = function () {\n    this.isPreReadyOver = true;\n    /**\n     * An event occurs when all element are pre-ready (When all elements have the loading attribute applied or the size is known)\n     * @ko 모든 엘리먼트들이 사전 준비된 경우 (모든 엘리먼트들이 loading 속성이 적용되었거나 사이즈를 알 수 있는 경우) 이벤트가 발생한다.\n     * @event eg.ImReady#preReady\n     * @param {eg.ImReady.OnPreReady} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReady: e => {\n     *     // 0, 3\n     *     console.log(e.readyCount, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n\n    this.trigger(\"preReady\", {\n      readyCount: this.readyCount,\n      totalCount: this.totalCount,\n      isReady: this.isReady(),\n      hasLoading: this.hasLoading()\n    });\n  };\n\n  __proto.onReadyElement = function (index) {\n    var info = this.elementInfos[index];\n    /**\n     * An event occurs when the element is ready\n     * @ko 해당 엘리먼트가 준비가 되었을 때 이벤트가 발생한다.\n     * @event eg.ImReady#readyElement\n     * @param {eg.ImReady.OnReadyElement} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   readyElement: e => {\n     *     // 1, 0, false, 3\n     *     // 2, 1, false, 3\n     *     // 3, 2, true, 3\n     *     console.log(e.readyCount, e.index, e.hasError, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n\n    this.trigger(\"readyElement\", {\n      index: index,\n      element: info.element,\n      hasError: info.hasError,\n      errorCount: this.getErrorCount(),\n      totalErrorCount: this.totalErrorCount,\n      preReadyCount: this.preReadyCount,\n      readyCount: this.readyCount,\n      totalCount: this.totalCount,\n      isPreReady: this.isPreReady(),\n      isReady: this.isReady(),\n      hasLoading: info.hasLoading,\n      isPreReadyOver: this.isPreReadyOver,\n      isSkip: info.isSkip\n    });\n  };\n\n  __proto.onReady = function () {\n    /**\n     * An event occurs when all element are ready\n     * @ko 모든 엘리먼트들이 준비된 경우 이벤트가 발생한다.\n     * @event eg.ImReady#ready\n     * @param {eg.ImReady.OnReady} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReady: e => {\n     *     // 0, 3\n     *     console.log(e.readyCount, e.totalCount),\n     *   },\n     *   ready: e => {\n     *     // 1, 3\n     *     console.log(e.errorCount, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(\"ready\", {\n      errorCount: this.getErrorCount(),\n      totalErrorCount: this.totalErrorCount,\n      totalCount: this.totalCount\n    });\n  };\n\n  __proto.getErrorCount = function () {\n    return this.elementInfos.filter(function (info) {\n      return info.hasError;\n    }).length;\n  };\n\n  __proto.hasLoading = function () {\n    return this.elementInfos.some(function (info) {\n      return info.hasLoading;\n    });\n  };\n\n  return ImReadyManager;\n}(Component);\n\nvar ImageLoader = /*#__PURE__*/function (_super) {\n  __extends(ImageLoader, _super);\n\n  function ImageLoader() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = ImageLoader.prototype;\n\n  __proto.checkElement = function () {\n    var element = this.element;\n    var src = element.getAttribute(\"src\");\n\n    if (element.complete) {\n      if (src) {\n        // complete\n        if (!element.naturalWidth) {\n          this.onAlreadyError(element);\n        }\n\n        return false;\n      } else {\n        // Using an external lazy loading module\n        this.onAlreadyPreReady();\n      }\n    }\n\n    this.addEvents();\n    IS_IE && element.setAttribute(\"src\", src);\n    return true;\n  };\n\n  ImageLoader.EVENTS = [\"load\", \"error\"];\n  return ImageLoader;\n}(Loader);\n\nvar VideoLoader = /*#__PURE__*/function (_super) {\n  __extends(VideoLoader, _super);\n\n  function VideoLoader() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  var __proto = VideoLoader.prototype;\n\n  __proto.checkElement = function () {\n    var element = this.element; // HAVE_NOTHING: 0, no information whether or not the audio/video is ready\n    // HAVE_METADATA: 1, HAVE_METADATA - metadata for the audio/video is ready\n    // HAVE_CURRENT_DATA: 2, data for the current playback position is available, but not enough data to play next frame/millisecond\n    // HAVE_FUTURE_DATA: 3, data for the current and at least the next frame is available\n    // HAVE_ENOUGH_DATA: 4, enough data available to start playing\n\n    if (element.readyState >= 1) {\n      return false;\n    }\n\n    if (element.error) {\n      this.onAlreadyError(element);\n      return false;\n    }\n\n    this.addEvents();\n    return true;\n  };\n\n  VideoLoader.EVENTS = [\"loadedmetadata\", \"error\"];\n  return VideoLoader;\n}(Loader);\n\nvar ImReady = /*#__PURE__*/function (_super) {\n  __extends(ImReady, _super);\n\n  function ImReady(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    return _super.call(this, _assign({\n      loaders: {\n        img: ImageLoader,\n        video: VideoLoader\n      }\n    }, options)) || this;\n  }\n\n  return ImReady;\n}(ImReadyManager);\n/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\n\n\nexport default ImReady;\nexport { EVENTS, ImageLoader, Loader, ImReadyManager as Manager, PROPS, VideoLoader };","map":{"version":3,"sources":["../src/consts.ts","../src/utils.ts","../src/AutoSizer.ts","../src/loaders/Loader.ts","../src/loaders/ElementLoader.ts","../src/ImReadyManager.ts","../src/loaders/ImageLoader.ts","../src/loaders/VideoLoader.ts","../src/ImReady.ts","../src/index.ts"],"names":["isWindow","ua","window","SUPPORT_COMPUTEDSTYLE","IS_IE","SUPPORT_ADDEVENTLISTENER","WIDTH","HEIGHT","PROPS","EVENTS","getAttribute","el","name","toArray","arr","hasSizeAttribute","target","prefix","hasLoadingAttribute","hasSkipAttribute","addEvent","element","type","handler","removeEvent","innerWidth","getSize","innerHeight","getStyles","size","parseFloat","getContentElements","tags","skipElements","tag","elements","addAutoSizer","resize","removeAutoSizer","index","fixed","elementPrefix","dataWidth","parseInt","dataHeight","resizeAllAutoSizers","__extends","Loader","_this","_super","e","withPreReady","hasLoading","isSkip","setTimeout","ElementLoader","loaders","loader","info","isPreReady","isReady","hasError","length","tagName","Object","children","childrenImReady","contentElements","errorCount","totalErrorCount","preReadyCount","readyCount","totalCount","isPreReadyOver","ImageLoader","src","VideoLoader","img","video"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;AAKA,IAAMA,QAAQ,GAAG,OAAA,MAAA,KAAjB,WAAA;AACA,IAAMC,EAAE,GAAGD,QAAQ,GAAGE,MAAM,CAANA,SAAAA,CAAH,SAAA,GAAnB,EAAA;AACO,IAAMC,qBAAqB,GAAGH,QAAQ,GAAG,CAAC,EAAE,sBAAN,MAAI,CAAJ,GAAtC,KAAA;AACA,IAAMI,KAAK,GAAG,kCAAA,IAAA,CAAd,EAAc,CAAd;AACA,IAAMC,wBAAwB,GAAGL,QAAQ,GAAG,CAAC,EAAE,sBAAN,QAAI,CAAJ,GAAzC,KAAA;AACA,IAAMM,KAAK,GAAX,OAAA;AACA,IAAMC,MAAM,GAAZ,QAAA;IAEMC,KAAK,GAAG,CAAA,QAAA,EAAA,SAAA,C;IAKRC,MAAM,GAAG,CAAA,iBAAA,EAAA,cAAA,EAAA,OAAA,EAAA,UAAA,EAAA,OAAA,C;;SCTNC,Y,CAAaC,E,EAAiBC,I,EAAAA;AAC5C,SAAOD,EAAE,CAAFA,YAAAA,CAAAA,IAAAA,KAAP,EAAA;AACD;;AAED,SAAgBE,OAAhB,CAA2BC,GAA3B,EAA2BA;AACzB,SAAO,GAAA,KAAA,CAAA,IAAA,CAAP,GAAO,CAAP;AACD;;AACD,SAAgBC,gBAAhB,CAAiCC,MAAjC,EAAsD,MAAtD,EAAsD;AAAA,MAAA,MAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,MAAA,GAAA,OAAA;;;AACpD,SAAO,CAAC,CAACA,MAAM,CAANA,YAAAA,CAAuBC,MAAM,GAAtC,OAASD,CAAT;AACD;;AACD,SAAgBE,mBAAhB,CAAoCF,MAApC,EAAoCA;AAClC,SAAQ,aAAD,MAAC,IAAyBA,MAA2B,CAA3BA,YAAAA,CAAAA,SAAAA,MAAjC,MAAA;AACD;;AACD,SAAgBG,gBAAhB,CAAiCH,MAAjC,EAAsD,MAAtD,EAAsD;AAAA,MAAA,MAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,MAAA,GAAA,OAAA;;;AACpD,SAAO,CAAC,CAACA,MAAM,CAANA,YAAAA,CAAuBC,MAAM,GAAtC,MAASD,CAAT;AACD;;AACD,SAAgBI,QAAhB,CACEC,OADF,EAEEC,IAFF,EAGEC,OAHF,EAGEA;AAEA,MAAA,wBAAA,EAA8B;AAC5BF,IAAAA,OAAO,CAAPA,gBAAAA,CAAAA,IAAAA,EAAAA,OAAAA,EAAAA,KAAAA;AADF,GAAA,MAEO,IAAKA,OAAe,CAApB,WAAA,EAAkC;AACtCA,IAAAA,OAAe,CAAfA,WAAAA,CAA4B,OAA5BA,IAAAA,EAAAA,OAAAA;AADI,GAAA,MAEA;AACJA,IAAAA,OAAe,CAAC,OAAhBA,IAAe,CAAfA,GAAAA,OAAAA;AACF;AACF;;AACD,SAAgBG,WAAhB,CACEH,OADF,EAEEC,IAFF,EAGEC,OAHF,EAGEA;AAEA,MAAIF,OAAO,CAAX,mBAAA,EAAiC;AAC/BA,IAAAA,OAAO,CAAPA,mBAAAA,CAAAA,IAAAA,EAAAA,OAAAA,EAAAA,KAAAA;AADF,GAAA,MAEO,IAAKA,OAAe,CAApB,WAAA,EAAkC;AACtCA,IAAAA,OAAe,CAAfA,WAAAA,CAA4B,OAA5BA,IAAAA,EAAAA,OAAAA;AADI,GAAA,MAEA;AACJA,IAAAA,OAAe,CAAC,OAAhBA,IAAe,CAAfA,GAAAA,IAAAA;AACF;AACF;;AAED,SAAgBI,UAAhB,CAA2Bd,EAA3B,EAA2BA;AACzB,SAAOe,OAAO,CAAA,EAAA,EAAd,OAAc,CAAd;AACD;;AACD,SAAgBC,WAAhB,CAA4BhB,EAA5B,EAA4BA;AAC1B,SAAOe,OAAO,CAAA,EAAA,EAAd,QAAc,CAAd;AACD;;AACD,SAAgBE,SAAhB,CAA0BjB,EAA1B,EAA0BA;AACxB,SAAO,CAACR,qBAAqB,GAC3BD,MAAM,CAANA,gBAAAA,CAD2B,EAC3BA,CAD2B,GACIS,EAAU,CADpC,YAAA,KAAP,EAAA;AAED;;AACD,SAAA,OAAA,CAAA,EAAA,EAAA,IAAA,EAAA;AACE,MAAMkB,IAAI,GAAIlB,EAAU,CAAC,WAAXA,IAAU,CAAVA,IAAgCA,EAAU,CAAC,WAAzD,IAAwD,CAAxD;AAEA,SAAOmB,UAAU,CAACD,IAAI,IAAID,SAAS,CAATA,EAAS,CAATA,CAAchB,IAAI,CAArCkB,WAAiClB,EAAdgB,CAAT,CAAVE,IAAP,CAAA;AACD;;AAED,SAAgBC,kBAAhB,CAAmCV,OAAnC,EAAyDW,IAAzD,EAAyEf,MAAzE,EAAyEA;AACvE,MAAMgB,YAAY,GAAGpB,OAAO,CAAC,OAAO,CAAP,gBAAA,CAAyB,cAAA,CAAA,CACpD,MAAA,MAAA,GAAA,SAAA,GAAA,MAAA,GAAA,QADoD,CAAA,EAEjD,IAAI,CAAJ,GAAA,CAAS,UAAA,GAAA,EAAA;AAAO,WAAC,CAClB,MAAA,MAAA,GAAA,QAAA,GADkB,GAAA,EAEfqB,GAAG,GAAHA,GAAAA,GAAAA,MAAAA,GAFe,OAAA,EAGlB,MAAA,MAAA,GAAA,SAAA,GAHiB,GAAC,EAAD,IAAC,CAAD,IAAC,CAAD;AAFiC,GAEjD,CAFiD,CAAA,CAAA,IAAA,CAAtD,IAAsD,CAAzB,CAAD,CAA5B;AASA,SAAO,OAAO,CACZb,OAAO,CAAPA,gBAAAA,CAAyB,MAAA,MAAA,GAAA,UAAA,GAAqBW,IAAI,CAAJA,IAAAA,CADzC,IACyCA,CAA9CX,CADY,CAAP,CAAA,MAAA,CAEE,UAAA,EAAA,EAAA;AACP,WAAOY,YAAY,CAAZA,OAAAA,CAAAA,EAAAA,MAA6B,CAApC,CAAA;AAHF,GAAO,CAAP;AAKD;ACnFD;;;;;;;AASA,IAAME,QAAQ,GAAd,EAAA;;AAEA,SAAgBC,YAAhB,CAA6Bf,OAA7B,EAAwDJ,MAAxD,EAAwDA;AACtD,GAACkB,QAAQ,CAAT,MAAA,IAAoBf,QAAQ,CAAA,MAAA,EAAA,QAAA,EAA5B,mBAA4B,CAA5B;AACAC,EAAAA,OAAO,CAAPA,UAAAA,GAAAA,MAAAA;AACAc,EAAAA,QAAQ,CAARA,IAAAA,CAAAA,OAAAA;AACAE,EAAAA,MAAM,CAANA,OAAM,CAANA;AACD;;AACD,SAAgBC,eAAhB,CAAgCjB,OAAhC,EAA2DJ,MAA3D,EAA2DA;AACzD,MAAMsB,KAAK,GAAGJ,QAAQ,CAARA,OAAAA,CAAd,OAAcA,CAAd;;AAEA,MAAII,KAAK,GAAT,CAAA,EAAe;AACb;AACD;;AACD,MAAMC,KAAK,GAAG9B,YAAY,CAAA,OAAA,EAAaO,MAAM,GAA7C,OAA0B,CAA1B;AAEA,SAAOI,OAAO,CAAd,UAAA;AACAA,EAAAA,OAAO,CAAPA,KAAAA,CAAcmB,KAAK,KAALA,MAAAA,GAAAA,KAAAA,GAAdnB,MAAAA,IAAAA,EAAAA;AACAc,EAAAA,QAAQ,CAARA,MAAAA,CAAAA,KAAAA,EAAAA,CAAAA;AAEA,GAACA,QAAQ,CAAT,MAAA,IAAoBX,WAAW,CAAA,MAAA,EAAA,QAAA,EAA/B,mBAA+B,CAA/B;AACD;;AACD,SAAA,MAAA,CAAA,OAAA,EAAA,MAAA,EAAA;AAA2C,MAAA,MAAA,KAAA,KAAA,CAAA,EAAA;AAAA,IAAA,MAAA,GAAA,OAAA;;;AACzC,MAAMiB,aAAa,GAAGpB,OAAO,CAAPA,UAAAA,IAAtB,MAAA;AACA,MAAMqB,SAAS,GAAGC,QAAQ,CAACjC,YAAY,CAAA,OAAA,EAAU,KAAA,aAAA,GAAvB,KAAa,CAAb,EAARiC,EAAQ,CAARA,IAAlB,CAAA;AACA,MAAMC,UAAU,GAAGD,QAAQ,CAACjC,YAAY,CAAA,OAAA,EAAU,KAAA,aAAA,GAAvB,MAAa,CAAb,EAARiC,EAAQ,CAARA,IAAnB,CAAA;AACA,MAAMH,KAAK,GAAG9B,YAAY,CAAA,OAAA,EAAa+B,aAAa,GAApD,OAA0B,CAA1B;;AAEA,MAAID,KAAK,KAAT,MAAA,EAAsB;AACpB,QAAMX,IAAI,GAAGF,WAAW,CAAXA,OAAW,CAAXA,IAAb,UAAA;AAEAN,IAAAA,OAAO,CAAPA,KAAAA,CAAAA,KAAAA,IAA0BqB,SAAS,GAATA,UAAAA,GAAAA,IAAAA,GAA1BrB,IAAAA;AAHF,GAAA,MAIO;AACL,QAAMQ,IAAI,GAAGJ,UAAU,CAAVA,OAAU,CAAVA,IAAb,SAAA;AAEAJ,IAAAA,OAAO,CAAPA,KAAAA,CAAAA,MAAAA,IAA2BuB,UAAU,GAAVA,SAAAA,GAAAA,IAAAA,GAA3BvB,IAAAA;AACD;AACF;;AACD,SAAgBwB,mBAAhB,GAAgBA;AACdV,EAAAA,QAAQ,CAARA,OAAAA,CAAiB,UAAA,OAAA,EAAA;AACfE,IAAAA,MAAM,CAANA,OAAM,CAANA;AADFF,GAAAA;AAGD;;ACxCD,IAAA,MAAA,G;AAA0EW,EAAAA,SAAAA,CAAAA,MAAAA,EAAAA,MAAAA,CAAAA;;AAWxE,WAAA,MAAA,CAAA,OAAA,EAAA,OAAA,EAAA;AAAkC,QAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,OAAA,GAAA,EAAA;;;AAAlC,QAAA,KAAA,GACEG,MAAAA,CAAAA,IAAAA,CAAAA,IAAAA,KADF,IAAA;;AANUD,IAAAA,KAAAA,CAAAA,OAAAA,GAAAA,KAAAA;AACAA,IAAAA,KAAAA,CAAAA,UAAAA,GAAAA,KAAAA;AACAA,IAAAA,KAAAA,CAAAA,WAAAA,GAAAA,KAAAA;AACAA,IAAAA,KAAAA,CAAAA,UAAAA,GAAAA,KAAAA;AACAA,IAAAA,KAAAA,CAAAA,MAAAA,GAAAA,KAAAA;;AAyDHA,IAAAA,KAAAA,CAAAA,OAAAA,GAAU,UAAA,CAAA,EAAA;AACfA,MAAAA,KAAI,CAAJA,KAAAA;;AAGA,UAAIE,CAAC,IAAIA,CAAC,CAADA,IAAAA,KAAT,OAAA,EAA6B;AAC3BF,QAAAA,KAAI,CAAJA,OAAAA,CAAaA,KAAI,CAAjBA,OAAAA;AACD,OANc,CAMd;;;AAED,UAAMG,YAAY,GAAG,CAACH,KAAI,CAAL,WAAA,IAAqB,CAACA,KAAI,CAA/C,UAAA;;AAEAA,MAAAA,KAAI,CAAJA,OAAAA,CAAAA,YAAAA;AAVKA,KAAAA;;AArDLA,IAAAA,KAAI,CAAJA,OAAAA,GAAAA,OAAAA,CAAAA;AACE/B,MAAAA,MAAM,EAAE;AADV+B,KAAAA,EAAAA,OAAAA,CAAAA;AAIAA,IAAAA,KAAI,CAAJA,OAAAA,GAAAA,OAAAA;AACA,QAAM/B,MAAM,GAAG+B,KAAI,CAAJA,OAAAA,CAAf,MAAA;AAEAA,IAAAA,KAAI,CAAJA,WAAAA,GAAmBjC,gBAAgB,CAAA,OAAA,EAAnCiC,MAAmC,CAAnCA;AACAA,IAAAA,KAAI,CAAJA,MAAAA,GAAc7B,gBAAgB,CAAA,OAAA,EAA9B6B,MAA8B,CAA9BA;AACAA,IAAAA,KAAI,CAAJA,UAAAA,GAAkB9B,mBAAmB,CAArC8B,OAAqC,CAArCA;;AACD;;;;AACM,EAAA,OAAA,CAAA,KAAA,GAAP,YAAA;AACE,QAAI,KAAA,MAAA,IAAe,CAAC,KAApB,YAAoB,EAApB,EAAyC;AACvC;AACA,WAAA,cAAA,CAAA,IAAA;AACA,aAAA,KAAA;AACD;;AAED,QAAI,KAAJ,WAAA,EAAsB;AACpBZ,MAAAA,YAAY,CAAC,KAAD,OAAA,EAAe,KAAA,OAAA,CAA3BA,MAAY,CAAZA;AACD;;AACD,QAAI,KAAA,WAAA,IAAoB,KAAxB,UAAA,EAAyC;AACvC;AACA,WAAA,iBAAA;AACD,KAbH,CAaG;;;AAED,WAAA,IAAA;AAfK,GAAA;;AAiBA,EAAA,OAAA,CAAA,SAAA,GAAP,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,QAAMf,OAAO,GAAG,KAAhB,OAAA;AACC,SAAA,WAAA,CAAA,MAAA,CAAA,OAAA,CAAkD,UAAA,IAAA,EAAA;AACjDD,MAAAA,QAAQ,CAAA,OAAA,EAAA,IAAA,EAAgB4B,KAAI,CAA5B5B,OAAQ,CAARA;AADD,KAAA;AAFI,GAAA;;AAMA,EAAA,OAAA,CAAA,KAAA,GAAP,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,QAAMC,OAAO,GAAG,KAAhB,OAAA;AACC,SAAA,WAAA,CAAA,MAAA,CAAA,OAAA,CAAkD,UAAA,IAAA,EAAA;AACjDG,MAAAA,WAAW,CAAA,OAAA,EAAA,IAAA,EAAgBwB,KAAI,CAA/BxB,OAAW,CAAXA;AADD,KAAA;AAGD,SAAA,eAAA;AALK,GAAA;;AAOA,EAAA,OAAA,CAAA,OAAA,GAAP,YAAA;AACE,SAAA,KAAA;AACA,SAAA,GAAA;AAFK,GAAA;;AAIA,EAAA,OAAA,CAAA,eAAA,GAAP,YAAA;AACE,QAAI,KAAJ,WAAA,EAAsB;AACpB;AACQ,UAAA,MAAM,GAAK,KAAA,OAAA,CAAX,MAAA;AAERc,MAAAA,eAAe,CAAC,KAAD,OAAA,EAAfA,MAAe,CAAfA;AACD;AANI,GAAA;;AAoBA,EAAA,OAAA,CAAA,OAAA,GAAP,UAAA,MAAA,EAAA;AACE,SAAA,OAAA,CAAA,OAAA,EAAsB;AACpBjB,MAAAA,OAAO,EAAE,KADW,OAAA;AAEpBL,MAAAA,MAAM,EAAEA;AAFY,KAAtB;AADK,GAAA;;AAMA,EAAA,OAAA,CAAA,UAAA,GAAP,YAAA;AACE,QAAI,KAAJ,UAAA,EAAqB;AACnB;AACD;;AACD,SAAA,UAAA,GAAA,IAAA;AACA,SAAA,OAAA,CAAA,UAAA,EAAyB;AACvBK,MAAAA,OAAO,EAAE,KADc,OAAA;AAEvB+B,MAAAA,UAAU,EAAE,KAFW,UAAA;AAGvBC,MAAAA,MAAM,EAAE,KAAKA;AAHU,KAAzB;AALK,GAAA;;AAWA,EAAA,OAAA,CAAA,OAAA,GAAP,UAAA,YAAA,EAAA;AACE,QAAI,KAAJ,OAAA,EAAkB;AAChB;AACD;;AACDF,IAAAA,YAAY,GAAG,CAAC,KAAD,UAAA,IAAfA,YAAAA;;AAEA,QAAA,YAAA,EAAkB;AAChB,WAAA,UAAA,GAAA,IAAA;AACD;;AACD,SAAA,eAAA;AACA,SAAA,OAAA,GAAA,IAAA;AACA,SAAA,OAAA,CAAA,OAAA,EAAsB;AACpB9B,MAAAA,OAAO,EAAE,KADW,OAAA;AAEpB8B,MAAAA,YAAY,EAFQ,YAAA;AAGpBC,MAAAA,UAAU,EAAE,KAHQ,UAAA;AAIpBC,MAAAA,MAAM,EAAE,KAAKA;AAJO,KAAtB;AAXK,GAAA;;AAkBA,EAAA,OAAA,CAAA,cAAA,GAAP,UAAA,MAAA,EAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACEC,IAAAA,UAAU,CAAC,YAAA;AACTN,MAAAA,KAAI,CAAJA,OAAAA,CAAAA,MAAAA;AADFM,KAAU,CAAVA;AADK,GAAA;;AAKA,EAAA,OAAA,CAAA,iBAAA,GAAP,YAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACEA,IAAAA,UAAU,CAAC,YAAA;AACTN,MAAAA,KAAI,CAAJA,UAAAA;AADFM,KAAU,CAAVA;AADK,GAAA;;AAKA,EAAA,OAAA,CAAA,cAAA,GAAP,UAAA,YAAA,EAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACEA,IAAAA,UAAU,CAAC,YAAA;AACTN,MAAAA,KAAI,CAAJA,OAAAA,CAAAA,YAAAA;AADFM,KAAU,CAAVA;AADK,GAAA;;AA1HOP,EAAAA,MAAAA,CAAAA,MAAAA,GAAAA,EAAAA;AA+HhB,SAAA,MAAA;AAAC,C,CAhID,S,CAAA;;ACDA,IAAA,aAAA,G;AAA0DD,EAAAA,SAAAA,CAAAA,aAAAA,EAAAA,MAAAA,CAAAA;;AAA1D,WAAA,aAAA,GAAA;;AAoCC;;;;AAhCQ,EAAA,OAAA,CAAA,aAAA,GAAP,UAAA,UAAA,EAAA;AACE,SAAA,UAAA,GAAA,UAAA;AADK,GAAA;;AAGA,EAAA,OAAA,CAAA,KAAA,GAAP,YAAA;AACE,QAAI,KAAJ,MAAA,EAAiB;AACf;AACA,WAAA,cAAA,CAAA,IAAA;AACA,aAAA,KAAA;AACD;;AAED,QAAI,KAAJ,WAAA,EAAsB;AACpBV,MAAAA,YAAY,CAAC,KAAD,OAAA,EAAe,KAAA,OAAA,CAA3BA,MAAY,CAAZA;AACA,WAAA,iBAAA;AAFF,KAAA,MAGO;AACL;AACA,WAAA,OAAA,CAAA,iBAAA;AACD;;AACD,WAAA,IAAA;AAdK,GAAA;;AAgBA,EAAA,OAAA,CAAA,YAAA,GAAP,YAAA;AACE,WAAA,IAAA;AADK,GAAA;;AAGA,EAAA,OAAA,CAAA,OAAA,GAAP,YAAA;AACE,SAAA,KAAA;AACA,SAAA,OAAA,CAAA,gBAAA;AACA,SAAA,GAAA;AAHK,GAAA;;AAKA,EAAA,OAAA,CAAA,iBAAA,GAAP,YAAA;AACE;AACAa,IAAAA,MAAAA,CAAAA,SAAAA,CAAAA,iBAAAA,CAAAA,IAAAA,CAAAA,IAAAA;;AACA,SAAA,OAAA,CAAA,sBAAA;AAHK,GAAA;;AA9BOM,EAAAA,aAAAA,CAAAA,MAAAA,GAAAA,EAAAA;AAmChB,SAAA,aAAA;AAAC,C,CApCD,M,CAAA;ACDA;;;;;;AAIA,IAAA,cAAA,G;AAA6BT,EAAAA,SAAAA,CAAAA,cAAAA,EAAAA,MAAAA,CAAAA;AAQ3B;;;;;AAGA,WAAA,cAAA,CAAA,OAAA,EAAA;AAAY,QAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,OAAA,GAAA,EAAA;;;AAAZ,QAAA,KAAA,GACEG,MAAAA,CAAAA,IAAAA,CAAAA,IAAAA,KADF,IAAA;;AATQD,IAAAA,KAAAA,CAAAA,UAAAA,GAAAA,CAAAA;AACAA,IAAAA,KAAAA,CAAAA,aAAAA,GAAAA,CAAAA;AACAA,IAAAA,KAAAA,CAAAA,UAAAA,GAAAA,CAAAA;AACAA,IAAAA,KAAAA,CAAAA,eAAAA,GAAAA,CAAAA;AACAA,IAAAA,KAAAA,CAAAA,cAAAA,GAAAA,IAAAA;AACAA,IAAAA,KAAAA,CAAAA,YAAAA,GAAAA,EAAAA;AAMNA,IAAAA,KAAI,CAAJA,OAAAA,GAAAA,OAAAA,CAAAA;AACEQ,MAAAA,OAAO,EAAE,EADXR;AAEE/B,MAAAA,MAAM,EAAE;AAFV+B,KAAAA,EAAAA,OAAAA,CAAAA;;AAKD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BO,EAAA,OAAA,CAAA,KAAA,GAAP,UAAA,QAAA,EAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACU,QAAA,MAAM,GAAK,KAAA,OAAA,CAAX,MAAA;AAER,SAAA,KAAA;AACA,SAAA,YAAA,GAAoB,OAAO,CAAP,QAAO,CAAP,CAAA,GAAA,CAAsB,UAAA,OAAA,EAAA,KAAA,EAAA;AACxC,UAAMS,MAAM,GAAG,KAAI,CAAJ,SAAA,CAAA,OAAA,EAAwB;AAAExC,QAAAA,MAAM,EAAA;AAAR,OAAxB,CAAf;;AAEAwC,MAAAA,MAAM,CAANA,KAAAA;AACAA,MAAAA,MAAM,CAANA,EAAAA,CAAAA,OAAAA,EAAmB,UAAA,CAAA,EAAA;AACjBT,QAAAA,KAAI,CAAJA,OAAAA,CAAAA,KAAAA,EAAoBE,CAAC,CAArBF,MAAAA;AADFS,OAAAA,EAAAA,EAAAA,CAAAA,UAAAA,EAEkB,UAAA,CAAA,EAAA;AAChB,YAAMC,IAAI,GAAGV,KAAI,CAAJA,YAAAA,CAAb,KAAaA,CAAb;AAEAU,QAAAA,IAAI,CAAJA,UAAAA,GAAkBR,CAAC,CAAnBQ,UAAAA;AACAA,QAAAA,IAAI,CAAJA,MAAAA,GAAcR,CAAC,CAAfQ,MAAAA;;AACA,YAAMC,UAAU,GAAGX,KAAI,CAAJA,aAAAA,CAAnB,KAAmBA,CAAnB;;AAEAA,QAAAA,KAAI,CAAJA,iBAAAA,CAAAA,KAAAA;;AAEAW,QAAAA,UAAU,IAAIX,KAAI,CAAlBW,UAAcX,EAAdW;AAXFF,OAAAA,EAAAA,EAAAA,CAAAA,OAAAA,EAYe,UAAA,EAAA,EAAA;YAAGN,YAAY,GAAA,EAAA,CAAA,Y;YAAEC,UAAU,GAAA,EAAA,CAAA,U;YAAEC,MAAM,GAAA,EAAA,CAAA,M;AAChD,YAAMK,IAAI,GAAGV,KAAI,CAAJA,YAAAA,CAAb,KAAaA,CAAb;AAEAU,QAAAA,IAAI,CAAJA,UAAAA,GAAAA,UAAAA;AACAA,QAAAA,IAAI,CAAJA,MAAAA,GAAAA,MAAAA;;AAEA,YAAMC,UAAU,GAAGR,YAAY,IAAIH,KAAI,CAAJA,aAAAA,CAAnC,KAAmCA,CAAnC;;AACA,YAAMY,OAAO,GAAGZ,KAAI,CAAJA,UAAAA,CAAhB,KAAgBA,CAAhB,CAPa,CAOb;;;AAGAG,QAAAA,YAAY,IAAIH,KAAI,CAAJA,iBAAAA,CAAhBG,KAAgBH,CAAhBG;;AACAH,QAAAA,KAAI,CAAJA,cAAAA,CAAAA,KAAAA;;AAEAW,QAAAA,UAAU,IAAIX,KAAI,CAAlBW,UAAcX,EAAdW;AACAC,QAAAA,OAAO,IAAIZ,KAAI,CAAfY,OAAWZ,EAAXY;AA1BFH,OAAAA;AA6BA,aAAO;AACLA,QAAAA,MAAM,EADD,MAAA;AAELpC,QAAAA,OAAO,EAFF,OAAA;AAGL+B,QAAAA,UAAU,EAHL,KAAA;AAILS,QAAAA,QAAQ,EAJH,KAAA;AAKLF,QAAAA,UAAU,EALL,KAAA;AAMLC,QAAAA,OAAO,EANF,KAAA;AAOLP,QAAAA,MAAM,EAAE;AAPH,OAAP;AAjCF,KAAoB,CAApB;AA4CA,QAAMS,MAAM,GAAG,KAAA,YAAA,CAAf,MAAA;AAEA,SAAA,UAAA,GAAA,MAAA;;AACA,QAAI,CAAJ,MAAA,EAAa;AACXR,MAAAA,UAAU,CAAC,YAAA;AACTN,QAAAA,KAAI,CAAJA,UAAAA;;AACAA,QAAAA,KAAI,CAAJA,OAAAA;AAFFM,OAAU,CAAVA;AAID;;AACD,WAAA,IAAA;AAzDK,GAAA;AA2DP;;;;;;AAIO,EAAA,OAAA,CAAA,aAAA,GAAP,YAAA;AACE,WAAO,KAAP,UAAA;AADK,GAAA;AAGP;;;;;;AAIO,EAAA,OAAA,CAAA,UAAA,GAAP,YAAA;AACE,WAAO,KAAA,YAAA,CAAA,KAAA,CAAwB,UAAA,IAAA,EAAA;AAAQ,aAAA,IAAI,CAAJ,UAAA;AAAvC,KAAO,CAAP;AADK,GAAA;AAGP;;;;;;AAIO,EAAA,OAAA,CAAA,OAAA,GAAP,YAAA;AACE,WAAO,KAAA,YAAA,CAAA,KAAA,CAAwB,UAAA,IAAA,EAAA;AAAQ,aAAA,IAAI,CAAJ,OAAA;AAAvC,KAAO,CAAP;AADK,GAAA;AAGP;;;;;;AAIO,EAAA,OAAA,CAAA,QAAA,GAAP,YAAA;AACE,WAAO,KAAA,eAAA,GAAP,CAAA;AADK,GAAA;AAGP;;;;;;AAIO,EAAA,OAAA,CAAA,KAAA,GAAP,YAAA;AACE,SAAA,cAAA,GAAA,KAAA;AACA,SAAA,UAAA,GAAA,CAAA;AACA,SAAA,aAAA,GAAA,CAAA;AACA,SAAA,UAAA,GAAA,CAAA;AACA,SAAA,eAAA,GAAA,CAAA;AACA,SAAA,YAAA,CAAA,OAAA,CAA0B,UAAA,IAAA,EAAA;AACxB,UAAI,CAACI,IAAI,CAAL,OAAA,IAAiBA,IAAI,CAAzB,MAAA,EAAkC;AAChCA,QAAAA,IAAI,CAAJA,MAAAA,CAAAA,OAAAA;AACD;AAHH,KAAA;AAKA,SAAA,YAAA,GAAA,EAAA;AAXK,GAAA;AAaP;;;;;;AAIO,EAAA,OAAA,CAAA,OAAA,GAAP,YAAA;AACE,SAAA,KAAA;AACA,SAAA,GAAA;AAFK,GAAA;;AAIC,EAAA,OAAA,CAAA,SAAA,GAAR,UAAA,OAAA,EAAA,OAAA,EAAA;AAAA,QAAA,KAAA,GAAA,IAAA;;AACE,QAAMK,OAAO,GAAG1C,OAAO,CAAPA,OAAAA,CAAhB,WAAgBA,EAAhB;AACA,QAAMmC,OAAO,GAAG,KAAA,OAAA,CAAhB,OAAA;AACA,QAAMxB,IAAI,GAAGgC,MAAM,CAANA,IAAAA,CAAb,OAAaA,CAAb;;AAEA,QAAIR,OAAO,CAAX,OAAW,CAAX,EAAsB;AACpB,aAAO,IAAIA,OAAO,CAAX,OAAW,CAAX,CAAA,OAAA,EAAP,OAAO,CAAP;AACD;;AACD,QAAMC,MAAM,GAAG,IAAA,aAAA,CAAA,OAAA,EAAf,OAAe,CAAf;AACA,QAAMQ,QAAQ,GAAGpD,OAAO,CAACQ,OAAO,CAAPA,gBAAAA,CAAsCW,IAAI,CAAJA,IAAAA,CAA/D,IAA+DA,CAAtCX,CAAD,CAAxB;AAEAoC,IAAAA,MAAM,CAANA,aAAAA,CAAqB,QAAQ,CAAR,IAAA,CAAc,UAAA,EAAA,EAAA;AAAM,aAAA,mBAAmB,CAAnB,EAAmB,CAAnB;AAAzCA,KAAqB,CAArBA;AACA,QAAIN,YAAY,GAAhB,KAAA;AAEA,QAAMe,eAAe,GAAG,KAAA,KAAA,GAAA,EAAA,CAAA,OAAA,EAAyB,UAAA,CAAA,EAAA;AAC/CT,MAAAA,MAAM,CAANA,OAAAA,CAAeP,CAAC,CAAhBO,MAAAA;AADsB,KAAA,EAAA,EAAA,CAAA,OAAA,EAET,YAAA;AACbA,MAAAA,MAAM,CAANA,OAAAA,CAAAA,YAAAA;AAHF,KAAwB,CAAxB;AAMAA,IAAAA,MAAM,CAANA,EAAAA,CAAAA,iBAAAA,EAA6B,YAAA;AAC3B;AACA,UAAMU,eAAe,GAAGpC,kBAAkB,CAAA,OAAA,EAAA,IAAA,EAAgBiB,KAAI,CAAJA,OAAAA,CAA1D,MAA0C,CAA1C;AAEAkB,MAAAA,eAAe,CAAfA,KAAAA,CAAAA,eAAAA,EAAAA,EAAAA,CAAAA,UAAAA,EAAsD,UAAA,CAAA,EAAA;AACpDf,QAAAA,YAAY,GAAGD,CAAC,CAAhBC,OAAAA;;AACA,YAAI,CAAJ,YAAA,EAAmB;AACjBM,UAAAA,MAAM,CAANA,UAAAA;AACD;AAJHS,OAAAA;AAJFT,KAAAA,EAAAA,EAAAA,CAAAA,sBAAAA,EAU8B,YAAA;AAC5B;AACA;AACA;AACAS,MAAAA,eAAe,CAAfA,KAAAA,CAAAA,QAAAA;AAdFT,KAAAA,EAAAA,EAAAA,CAAAA,gBAAAA,EAewB,YAAA;AACtBS,MAAAA,eAAe,CAAfA,OAAAA;AAhBFT,KAAAA;AAmBA,WAAA,MAAA;AAvCM,GAAA;;AAyCA,EAAA,OAAA,CAAA,KAAA,GAAR,YAAA;AACE,WAAO,IAAA,cAAA,CAAA,OAAA,CAAA,EAAA,EAAwB,KAA/B,OAAO,CAAA,CAAP;AADM,GAAA;;AAGA,EAAA,OAAA,CAAA,aAAA,GAAR,UAAA,KAAA,EAAA;AACE,SAAA,YAAA,CAAA,KAAA,EAAA,UAAA,GAAA,IAAA;AACA,MAAE,KAAF,aAAA;;AAGA,QAAI,KAAA,aAAA,GAAqB,KAAzB,UAAA,EAA0C;AACxC,aAAA,KAAA;AACD;;AACD,WAAA,IAAA;AARM,GAAA;;AAUA,EAAA,OAAA,CAAA,UAAA,GAAR,UAAA,KAAA,EAAA;AACE,SAAA,YAAA,CAAA,KAAA,EAAA,OAAA,GAAA,IAAA;AACA,MAAE,KAAF,UAAA;;AAEA,QAAI,KAAA,UAAA,GAAkB,KAAtB,UAAA,EAAuC;AACrC,aAAA,KAAA;AACD;;AACD,WAAA,IAAA;AAPM,GAAA;;AAWA,EAAA,OAAA,CAAA,OAAA,GAAR,UAAA,KAAA,EAAA,MAAA,EAAA;AACE,QAAMC,IAAI,GAAG,KAAA,YAAA,CAAb,KAAa,CAAb;AAEAA,IAAAA,IAAI,CAAJA,QAAAA,GAAAA,IAAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,SAAA,OAAA,CAAA,OAAA,EAAsB;AACpBrC,MAAAA,OAAO,EAAEqC,IAAI,CADO,OAAA;AAEpBnB,MAAAA,KAAK,EAFe,KAAA;AAGpBvB,MAAAA,MAAM,EAHc,MAAA;AAIpBoD,MAAAA,UAAU,EAAE,KAJQ,aAIR,EAJQ;AAKpBC,MAAAA,eAAe,EAAE,EAAE,KAAKA;AALJ,KAAtB;AA9BM,GAAA;;AAsCA,EAAA,OAAA,CAAA,iBAAA,GAAR,UAAA,KAAA,EAAA;AACE,QAAMX,IAAI,GAAG,KAAA,YAAA,CAAb,KAAa,CAAb;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,SAAA,OAAA,CAAA,iBAAA,EAAgC;AAC9BrC,MAAAA,OAAO,EAAEqC,IAAI,CADiB,OAAA;AAE9BnB,MAAAA,KAAK,EAFyB,KAAA;AAI9B+B,MAAAA,aAAa,EAAE,KAJe,aAAA;AAK9BC,MAAAA,UAAU,EAAE,KALkB,UAAA;AAM9BC,MAAAA,UAAU,EAAE,KANkB,UAAA;AAQ9Bb,MAAAA,UAAU,EAAE,KARkB,UAQlB,EARkB;AAS9BC,MAAAA,OAAO,EAAE,KATqB,OASrB,EATqB;AAU9BR,MAAAA,UAAU,EAAEM,IAAI,CAVc,UAAA;AAW9BL,MAAAA,MAAM,EAAEK,IAAI,CAACL;AAXiB,KAAhC;AA9BM,GAAA;;AA4CA,EAAA,OAAA,CAAA,UAAA,GAAR,YAAA;AACE,SAAA,cAAA,GAAA,IAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA,SAAA,OAAA,CAAA,UAAA,EAAyB;AACvBkB,MAAAA,UAAU,EAAE,KADW,UAAA;AAEvBC,MAAAA,UAAU,EAAE,KAFW,UAAA;AAGvBZ,MAAAA,OAAO,EAAE,KAHc,OAGd,EAHc;AAIvBR,MAAAA,UAAU,EAAE,KAAA,UAAA;AAJW,KAAzB;AA5BM,GAAA;;AAmCA,EAAA,OAAA,CAAA,cAAA,GAAR,UAAA,KAAA,EAAA;AACE,QAAMM,IAAI,GAAG,KAAA,YAAA,CAAb,KAAa,CAAb;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,SAAA,OAAA,CAAA,cAAA,EAA6B;AAC3BnB,MAAAA,KAAK,EADsB,KAAA;AAE3BlB,MAAAA,OAAO,EAAEqC,IAAI,CAFc,OAAA;AAI3BG,MAAAA,QAAQ,EAAEH,IAAI,CAJa,QAAA;AAK3BU,MAAAA,UAAU,EAAE,KALe,aAKf,EALe;AAM3BC,MAAAA,eAAe,EAAE,KANU,eAAA;AAQ3BC,MAAAA,aAAa,EAAE,KARY,aAAA;AAS3BC,MAAAA,UAAU,EAAE,KATe,UAAA;AAU3BC,MAAAA,UAAU,EAAE,KAVe,UAAA;AAY3Bb,MAAAA,UAAU,EAAE,KAZe,UAYf,EAZe;AAa3BC,MAAAA,OAAO,EAAE,KAbkB,OAalB,EAbkB;AAe3BR,MAAAA,UAAU,EAAEM,IAAI,CAfW,UAAA;AAgB3Be,MAAAA,cAAc,EAAE,KAhBW,cAAA;AAiB3BpB,MAAAA,MAAM,EAAEK,IAAI,CAACL;AAjBc,KAA7B;AA9BM,GAAA;;AAkDA,EAAA,OAAA,CAAA,OAAA,GAAR,YAAA;AACE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,SAAA,OAAA,CAAA,OAAA,EAAsB;AACpBe,MAAAA,UAAU,EAAE,KADQ,aACR,EADQ;AAEpBC,MAAAA,eAAe,EAAE,KAFG,eAAA;AAGpBG,MAAAA,UAAU,EAAE,KAAKA;AAHG,KAAtB;AA/BM,GAAA;;AAqCA,EAAA,OAAA,CAAA,aAAA,GAAR,YAAA;AACE,WAAO,KAAA,YAAA,CAAA,MAAA,CAAyB,UAAA,IAAA,EAAA;AAAQ,aAAA,IAAI,CAAJ,QAAA;AAAjC,KAAA,EAAP,MAAA;AADM,GAAA;;AAGA,EAAA,OAAA,CAAA,UAAA,GAAR,YAAA;AACE,WAAO,KAAA,YAAA,CAAA,IAAA,CAAuB,UAAA,IAAA,EAAA;AAAQ,aAAA,IAAI,CAAJ,UAAA;AAAtC,KAAO,CAAP;AADM,GAAA;;AAGV,SAAA,cAAA;AAjbA,C,CAAA,S,CAAA;;ACLA,IAAA,WAAA,G;AAAyC1B,EAAAA,SAAAA,CAAAA,WAAAA,EAAAA,MAAAA,CAAAA;;AAAzC,WAAA,WAAA,GAAA;;AAsBC;;;;AApBQ,EAAA,OAAA,CAAA,YAAA,GAAP,YAAA;AACE,QAAMzB,OAAO,GAAG,KAAhB,OAAA;AACA,QAAMsD,GAAG,GAAGtD,OAAO,CAAPA,YAAAA,CAAZ,KAAYA,CAAZ;;AAEA,QAAIA,OAAO,CAAX,QAAA,EAAsB;AACpB,UAAA,GAAA,EAAS;AACP;AACA,YAAI,CAACA,OAAO,CAAZ,YAAA,EAA2B;AACzB,eAAA,cAAA,CAAA,OAAA;AACD;;AACD,eAAA,KAAA;AALF,OAAA,MAMO;AACL;AACA,aAAA,iBAAA;AACD;AACF;;AACD,SAAA,SAAA;AACAjB,IAAAA,KAAK,IAAIiB,OAAO,CAAPA,YAAAA,CAAAA,KAAAA,EAATjB,GAASiB,CAATjB;AACA,WAAA,IAAA;AAlBK,GAAA;;AADOsE,EAAAA,WAAAA,CAAAA,MAAAA,GAAS,CAAA,MAAA,EAATA,OAAS,CAATA;AAqBhB,SAAA,WAAA;AAAC,C,CAtBD,M,CAAA;;ACDA,IAAA,WAAA,G;AAAyC5B,EAAAA,SAAAA,CAAAA,WAAAA,EAAAA,MAAAA,CAAAA;;AAAzC,WAAA,WAAA,GAAA;;AAmBC;;;;AAjBQ,EAAA,OAAA,CAAA,YAAA,GAAP,YAAA;AACE,QAAMzB,OAAO,GAAG,KAAhB,OAAA,CADF,CACE;AAEA;AACA;AACA;AACA;;AACA,QAAIA,OAAO,CAAPA,UAAAA,IAAJ,CAAA,EAA6B;AAC3B,aAAA,KAAA;AACD;;AACD,QAAIA,OAAO,CAAX,KAAA,EAAmB;AACjB,WAAA,cAAA,CAAA,OAAA;AACA,aAAA,KAAA;AACD;;AACD,SAAA,SAAA;AACA,WAAA,IAAA;AAfK,GAAA;;AADOuD,EAAAA,WAAAA,CAAAA,MAAAA,GAAS,CAAA,gBAAA,EAATA,OAAS,CAATA;AAkBhB,SAAA,WAAA;AAAC,C,CAnBD,M,CAAA;;ACGA,IAAA,OAAA,G;AAAsB9B,EAAAA,SAAAA,CAAAA,OAAAA,EAAAA,MAAAA,CAAAA;;AACpB,WAAA,OAAA,CAAA,OAAA,EAAA;AAAY,QAAA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAA,MAAA,OAAA,GAAA,EAAA;;;WACVG,MAAAA,CAAAA,IAAAA,CAAAA,IAAAA,EAAAA,OAAAA,CAAAA;AACEO,MAAAA,OAAO,EAAE;AACPqB,QAAAA,GAAG,EADI,WAAA;AAEPC,QAAAA,KAAK,EAAEF;AAFA;AADX3B,KAAAA,EAAAA,OAAAA,CAAAA,KAAAA,I;AAOD;;AACH,SAAA,OAAA;AAVA,C,CAAA,c,CAAA;ACVA","sourcesContent":["/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nconst isWindow = typeof window !== \"undefined\";\nconst ua = isWindow ? window.navigator.userAgent : \"\";\nexport const SUPPORT_COMPUTEDSTYLE = isWindow ? !!(\"getComputedStyle\" in window) : false;\nexport const IS_IE = /MSIE|Trident|Windows Phone|Edge/.test(ua);\nexport const SUPPORT_ADDEVENTLISTENER = isWindow ? !!(\"addEventListener\" in document) : false;\nexport const WIDTH = \"width\";\nexport const HEIGHT = \"height\";\n\nexport const PROPS = [\n  \"prefix\",\n  \"loaders\",\n] as const;\n\nexport const EVENTS = [\n  \"preReadyElement\",\n  \"readyElement\",\n  \"error\",\n  \"preReady\",\n  \"ready\",\n] as const;\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport { ArrayFormat } from \"./types\";\n\nimport { SUPPORT_ADDEVENTLISTENER, SUPPORT_COMPUTEDSTYLE } from \"./consts\";\n\nexport function getAttribute(el: HTMLElement, name: string): string {\n  return el.getAttribute(name) || \"\";\n}\n\nexport function toArray<T>(arr: ArrayFormat<T>): T[] {\n  return [].slice.call(arr);\n}\nexport function hasSizeAttribute(target: HTMLElement, prefix = \"data-\"): boolean {\n  return !!target.getAttribute(`${prefix}width`);\n}\nexport function hasLoadingAttribute(target: HTMLElement): target is HTMLImageElement {\n  return (\"loading\" in target) && (target as HTMLImageElement).getAttribute(\"loading\") === \"lazy\";\n}\nexport function hasSkipAttribute(target: HTMLElement, prefix = \"data-\"): boolean {\n  return !!target.getAttribute(`${prefix}skip`);\n}\nexport function addEvent(\n  element: EventTarget,\n  type: string,\n  handler: (...args: any[]) => void,\n) {\n  if (SUPPORT_ADDEVENTLISTENER) {\n    element.addEventListener(type, handler, false);\n  } else if ((element as any).attachEvent) {\n    (element as any).attachEvent(`on${type}`, handler);\n  } else {\n    (element as any)[`on${type}`] = handler;\n  }\n}\nexport function removeEvent(\n  element: EventTarget,\n  type: string,\n  handler: (...args: any[]) => void,\n) {\n  if (element.removeEventListener) {\n    element.removeEventListener(type, handler, false);\n  } else if ((element as any).detachEvent) {\n    (element as any).detachEvent(`on${type}`, handler);\n  } else {\n    (element as any)[`on${type}`] = null;\n  }\n}\n\nexport function innerWidth(el: HTMLElement) {\n  return getSize(el, \"Width\");\n}\nexport function innerHeight(el: HTMLElement) {\n  return getSize(el, \"Height\");\n}\nexport function getStyles(el: Element) {\n  return (SUPPORT_COMPUTEDSTYLE ?\n    window.getComputedStyle(el) : (el as any).currentStyle) || {};\n}\nfunction getSize(el: HTMLElement, name: \"Width\" | \"Height\") {\n  const size = (el as any)[`client${name}`] || (el as any)[`offset${name}`];\n\n  return parseFloat(size || getStyles(el)[name.toLowerCase()]) || 0;\n}\n\nexport function getContentElements(element: HTMLElement, tags: string[], prefix: string) {\n  const skipElements = toArray(element.querySelectorAll([\n    `[${prefix}skip] [${prefix}width]`,\n    ...tags.map(tag => ([\n      `[${prefix}skip] ${tag}`,\n      `${tag}[${prefix}skip]`,\n      `[${prefix}width] ${tag}`,\n    ]).join(\", \")),\n  ].join(\", \")));\n\n  return toArray<HTMLElement>(\n    element.querySelectorAll(`[${prefix}width], ${tags.join(\", \")}`),\n  ).filter(el => {\n    return skipElements.indexOf(el) === -1;\n  });\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport { addEvent, removeEvent, innerWidth, innerHeight, getAttribute } from \"./utils\";\nimport { WIDTH, HEIGHT } from \"./consts\";\nimport { AutoSizerElement } from \"./types\";\n\nconst elements: AutoSizerElement[] = [];\n\nexport function addAutoSizer(element: AutoSizerElement, prefix: string) {\n  !elements.length && addEvent(window, \"resize\", resizeAllAutoSizers);\n  element.__PREFIX__ = prefix;\n  elements.push(element);\n  resize(element);\n}\nexport function removeAutoSizer(element: AutoSizerElement, prefix: string) {\n  const index = elements.indexOf(element);\n\n  if (index < 0) {\n    return;\n  }\n  const fixed = getAttribute(element, `${prefix}fixed`);\n\n  delete element.__PREFIX__;\n  element.style[fixed === HEIGHT ? WIDTH : HEIGHT] = \"\";\n  elements.splice(index, 1);\n\n  !elements.length && removeEvent(window, \"resize\", resizeAllAutoSizers);\n}\nfunction resize(element: AutoSizerElement, prefix = \"data-\") {\n  const elementPrefix = element.__PREFIX__ || prefix;\n  const dataWidth = parseInt(getAttribute(element, `${elementPrefix}${WIDTH}`), 10) || 0;\n  const dataHeight = parseInt(getAttribute(element, `${elementPrefix}${HEIGHT}`), 10) || 0;\n  const fixed = getAttribute(element, `${elementPrefix}fixed`);\n\n  if (fixed === HEIGHT) {\n    const size = innerHeight(element) || dataHeight;\n\n    element.style[WIDTH] = `${dataWidth / dataHeight * size}px`;\n  } else {\n    const size = innerWidth(element) || dataWidth;\n\n    element.style[HEIGHT] = `${dataHeight / dataWidth * size}px`;\n  }\n}\nexport function resizeAllAutoSizers() {\n  elements.forEach(element => {\n    resize(element);\n  });\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport Component from \"@egjs/component\";\nimport { addAutoSizer, removeAutoSizer } from \"../AutoSizer\";\nimport { ImReadyLoaderEvents, ImReadyLoaderOptions } from \"../types\";\nimport { removeEvent, hasSizeAttribute, hasLoadingAttribute, addEvent, hasSkipAttribute } from \"../utils\";\n\n\nexport default abstract class Loader<T extends HTMLElement = any> extends Component<ImReadyLoaderEvents> {\n  public static EVENTS: string[] = [];\n  public options!: ImReadyLoaderOptions;\n  public abstract checkElement(): boolean;\n  protected element!: T;\n  protected isReady = false;\n  protected isPreReady = false;\n  protected hasDataSize = false;\n  protected hasLoading = false;\n  protected isSkip = false;\n\n  constructor(element: HTMLElement, options: Partial<ImReadyLoaderOptions> = {}) {\n    super();\n    this.options = {\n      prefix: \"data-\",\n      ...options,\n    };\n    this.element = element as T;\n    const prefix = this.options.prefix;\n\n    this.hasDataSize = hasSizeAttribute(element, prefix);\n    this.isSkip = hasSkipAttribute(element, prefix);\n    this.hasLoading = hasLoadingAttribute(element);\n  }\n  public check() {\n    if (this.isSkip || !this.checkElement()) {\n      // I'm Ready\n      this.onAlreadyReady(true);\n      return false;\n    }\n\n    if (this.hasDataSize) {\n      addAutoSizer(this.element, this.options.prefix);\n    }\n    if (this.hasDataSize || this.hasLoading) {\n      // I'm Pre Ready\n      this.onAlreadyPreReady();\n    }\n    // Wati Pre Ready, Ready\n    return true;\n  }\n  public addEvents() {\n    const element = this.element;\n    (this.constructor as typeof Loader).EVENTS.forEach(name => {\n      addEvent(element, name, this.onCheck);\n    });\n  }\n  public clear() {\n    const element = this.element;\n    (this.constructor as typeof Loader).EVENTS.forEach(name => {\n      removeEvent(element, name, this.onCheck);\n    });\n    this.removeAutoSizer();\n  }\n  public destroy() {\n    this.clear();\n    this.off();\n  }\n  public removeAutoSizer() {\n    if (this.hasDataSize) {\n      // I'm already ready.\n      const { prefix } = this.options;\n\n      removeAutoSizer(this.element, prefix);\n    }\n  }\n  public onCheck = (e?: Event) => {\n    this.clear();\n\n\n    if (e && e.type === \"error\") {\n      this.onError(this.element);\n    }\n    // I'm pre-ready and ready!\n    const withPreReady = !this.hasDataSize && !this.hasLoading;\n\n    this.onReady(withPreReady);\n  };\n  public onError(target: HTMLElement) {\n    this.trigger(\"error\", {\n      element: this.element,\n      target: target,\n    });\n  }\n  public onPreReady() {\n    if (this.isPreReady) {\n      return;\n    }\n    this.isPreReady = true;\n    this.trigger(\"preReady\", {\n      element: this.element,\n      hasLoading: this.hasLoading,\n      isSkip: this.isSkip,\n    });\n  }\n  public onReady(withPreReady: boolean) {\n    if (this.isReady) {\n      return;\n    }\n    withPreReady = !this.isPreReady && withPreReady;\n\n    if (withPreReady) {\n      this.isPreReady = true;\n    }\n    this.removeAutoSizer();\n    this.isReady = true;\n    this.trigger(\"ready\", {\n      element: this.element,\n      withPreReady,\n      hasLoading: this.hasLoading,\n      isSkip: this.isSkip,\n    });\n  }\n  public onAlreadyError(target: HTMLElement) {\n    setTimeout(() => {\n      this.onError(target);\n    });\n  }\n  public onAlreadyPreReady() {\n    setTimeout(() => {\n      this.onPreReady();\n    });\n  }\n  public onAlreadyReady(withPreReady: boolean) {\n    setTimeout(() => {\n      this.onReady(withPreReady);\n    });\n  }\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport { addAutoSizer } from \"../AutoSizer\";\nimport { ImReadyLoaderOptions } from \"../types\";\nimport Loader from \"./Loader\";\n\n\nexport class ElementLoader<T extends HTMLElement> extends Loader<T> {\n  public static EVENTS: string[] = [];\n  public options!: ImReadyLoaderOptions;\n\n  public setHasLoading(hasLoading: boolean) {\n    this.hasLoading = hasLoading;\n  }\n  public check() {\n    if (this.isSkip) {\n      // I'm Ready\n      this.onAlreadyReady(true);\n      return false;\n    }\n\n    if (this.hasDataSize) {\n      addAutoSizer(this.element, this.options.prefix);\n      this.onAlreadyPreReady();\n    } else {\n      // has not data size\n      this.trigger(\"requestChildren\");\n    }\n    return true;\n  }\n  public checkElement() {\n    return true;\n  }\n  public destroy() {\n    this.clear();\n    this.trigger(\"requestDestroy\");\n    this.off();\n  }\n  public onAlreadyPreReady() {\n    // has data size\n    super.onAlreadyPreReady();\n    this.trigger(\"reqeustReadyChildren\");\n  }\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport Component from \"@egjs/component\";\nimport { ElementLoader } from \"./loaders/ElementLoader\";\nimport { ArrayFormat, ElementInfo, ImReadyEvents, ImReadyLoaderOptions, ImReadyOptions } from \"./types\";\nimport { toArray, getContentElements, hasLoadingAttribute } from \"./utils\";\n/**\n * @alias eg.ImReady\n * @extends eg.Component\n */\nclass ImReadyManager extends Component<ImReadyEvents> {\n  public options!: ImReadyOptions;\n  private readyCount = 0;\n  private preReadyCount = 0;\n  private totalCount = 0;\n  private totalErrorCount = 0;\n  private isPreReadyOver = true;\n  private elementInfos: ElementInfo[] = [];\n  /**\n   * @param - ImReady's options\n   */\n  constructor(options: Partial<ImReadyOptions> = {}) {\n    super();\n    this.options = {\n      loaders: {},\n      prefix: \"data-\",\n      ...options,\n    };\n  }\n  /**\n   * Checks whether elements are in the ready state.\n   * @ko 엘리먼트가 준비 상태인지 체크한다.\n   * @elements - Elements to check ready status. <ko> 준비 상태를 체크할 엘리먼트들.</ko>\n   * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReadyElement: e => {\n     *     // 1, 3\n     *     // 2, 3\n     *     // 3, 3\n     *     console.log(e.preReadyCount, e.totalCount),\n     *   },\n     * });\n     * ```\n   */\n  public check(elements: ArrayFormat<HTMLElement>): this {\n    const { prefix } = this.options;\n\n    this.clear();\n    this.elementInfos = toArray(elements).map((element, index) => {\n      const loader = this.getLoader(element, { prefix });\n\n      loader.check();\n      loader.on(\"error\", e => {\n        this.onError(index, e.target);\n      }).on(\"preReady\", e => {\n        const info = this.elementInfos[index];\n\n        info.hasLoading = e.hasLoading;\n        info.isSkip = e.isSkip;\n        const isPreReady = this.checkPreReady(index);\n\n        this.onPreReadyElement(index);\n\n        isPreReady && this.onPreReady();\n      }).on(\"ready\", ({ withPreReady, hasLoading, isSkip }) => {\n        const info = this.elementInfos[index];\n\n        info.hasLoading = hasLoading;\n        info.isSkip = isSkip;\n\n        const isPreReady = withPreReady && this.checkPreReady(index);\n        const isReady = this.checkReady(index);\n\n        // Pre-ready and ready occur simultaneously\n        withPreReady && this.onPreReadyElement(index);\n        this.onReadyElement(index);\n\n        isPreReady && this.onPreReady();\n        isReady && this.onReady();\n      });\n\n      return {\n        loader,\n        element,\n        hasLoading: false,\n        hasError: false,\n        isPreReady: false,\n        isReady: false,\n        isSkip: false,\n      };\n    });\n\n    const length = this.elementInfos.length;\n\n    this.totalCount = length;\n    if (!length) {\n      setTimeout(() => {\n        this.onPreReady();\n        this.onReady();\n      });\n    }\n    return this;\n  }\n  /**\n   * Gets the total count of elements to be checked.\n   * @ko 체크하는 element의 총 개수를 가져온다.\n   */\n  public getTotalCount() {\n    return this.totalCount;\n  }\n  /**\n   * Whether the elements are all pre-ready. (all sizes are known)\n   * @ko 엘리먼트들이 모두 사전 준비가 됐는지 (사이즈를 전부 알 수 있는지) 여부.\n   */\n  public isPreReady() {\n    return this.elementInfos.every(info => info.isPreReady);\n  }\n  /**\n   * Whether the elements are all ready.\n   * @ko 엘리먼트들이 모두 준비가 됐는지 여부.\n   */\n  public isReady() {\n    return this.elementInfos.every(info => info.isReady);\n  }\n  /**\n   * Whether an error has occurred in the elements in the current state.\n   * @ko 현재 상태에서 엘리먼트들이 에러가 발생했는지 여부.\n   */\n  public hasError() {\n    return this.totalErrorCount > 0;\n  }\n  /**\n   * Clears events of elements being checked.\n   * @ko 체크 중인 엘리먼트들의 이벤트를 해제 한다.\n   */\n  public clear() {\n    this.isPreReadyOver = false;\n    this.totalCount = 0;\n    this.preReadyCount = 0;\n    this.readyCount = 0;\n    this.totalErrorCount = 0;\n    this.elementInfos.forEach(info => {\n      if (!info.isReady && info.loader) {\n        info.loader.destroy();\n      }\n    });\n    this.elementInfos = [];\n  }\n  /**\n   * Destory all events.\n   * @ko 모든 이벤트를 해제 한다.\n   */\n  public destroy() {\n    this.clear();\n    this.off();\n  }\n  private getLoader(element: HTMLElement, options: ImReadyLoaderOptions) {\n    const tagName = element.tagName.toLowerCase();\n    const loaders = this.options.loaders;\n    const tags = Object.keys(loaders);\n\n    if (loaders[tagName]) {\n      return new loaders[tagName](element, options);\n    }\n    const loader = new ElementLoader(element, options);\n    const children = toArray(element.querySelectorAll<HTMLElement>(tags.join(\", \")));\n\n    loader.setHasLoading(children.some(el => hasLoadingAttribute(el)));\n    let withPreReady = false;\n\n    const childrenImReady = this.clone().on(\"error\", e => {\n      loader.onError(e.target);\n    }).on(\"ready\", () => {\n      loader.onReady(withPreReady);\n    });\n\n    loader.on(\"requestChildren\", () => {\n      // has not data size\n      const contentElements = getContentElements(element, tags, this.options.prefix);\n\n      childrenImReady.check(contentElements).on(\"preReady\", e => {\n        withPreReady = e.isReady;\n        if (!withPreReady) {\n          loader.onPreReady();\n        }\n      });\n    }).on(\"reqeustReadyChildren\", () => {\n      // has data size\n      // loader call preReady\n      // check only video, image elements\n      childrenImReady.check(children);\n    }).on(\"requestDestroy\", () => {\n      childrenImReady.destroy();\n    });\n\n    return loader;\n  }\n  private clone() {\n    return new ImReadyManager({ ...this.options });\n  }\n  private checkPreReady(index: number) {\n    this.elementInfos[index].isPreReady = true;\n    ++this.preReadyCount;\n\n\n    if (this.preReadyCount < this.totalCount) {\n      return false;\n    }\n    return true;\n  }\n  private checkReady(index: number) {\n    this.elementInfos[index].isReady = true;\n    ++this.readyCount;\n\n    if (this.readyCount < this.totalCount) {\n      return false;\n    }\n    return true;\n  }\n\n\n  private onError(index: number, target: HTMLElement) {\n    const info = this.elementInfos[index];\n\n    info.hasError = true;\n    /**\n     * An event occurs if the image, video fails to load.\n     * @ko 이미지, 비디오가 로딩에 실패하면 이벤트가 발생한다.\n     * @event eg.ImReady#error\n     * @param {eg.ImReady.OnError} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\"/>\n     *    <img src=\"ERR\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check([document.querySelector(\"div\")]).on({\n     *   error: e => {\n     *     // <div>...</div>, 0, <img src=\"ERR\"/>\n     *     console.log(e.element, e.index, e.target),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(\"error\", {\n      element: info.element,\n      index,\n      target,\n      errorCount: this.getErrorCount(),\n      totalErrorCount: ++this.totalErrorCount,\n    });\n  }\n  private onPreReadyElement(index: number) {\n    const info = this.elementInfos[index];\n    /**\n     * An event occurs when the element is pre-ready (when the loading attribute is applied or the size is known)\n     * @ko 해당 엘리먼트가 사전 준비되었을 때(loading 속성이 적용되었거나 사이즈를 알 수 있을 때) 이벤트가 발생한다.\n     * @event eg.ImReady#preReadyElement\n     * @param {eg.ImReady.OnPreReadyElement} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReadyElement: e => {\n     *     // 1, 3\n     *     // 2, 3\n     *     // 3, 3\n     *     console.log(e.preReadyCount, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(\"preReadyElement\", {\n      element: info.element,\n      index,\n\n      preReadyCount: this.preReadyCount,\n      readyCount: this.readyCount,\n      totalCount: this.totalCount,\n\n      isPreReady: this.isPreReady(),\n      isReady: this.isReady(),\n      hasLoading: info.hasLoading,\n      isSkip: info.isSkip,\n    });\n  }\n  private onPreReady() {\n    this.isPreReadyOver = true;\n    /**\n     * An event occurs when all element are pre-ready (When all elements have the loading attribute applied or the size is known)\n     * @ko 모든 엘리먼트들이 사전 준비된 경우 (모든 엘리먼트들이 loading 속성이 적용되었거나 사이즈를 알 수 있는 경우) 이벤트가 발생한다.\n     * @event eg.ImReady#preReady\n     * @param {eg.ImReady.OnPreReady} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReady: e => {\n     *     // 0, 3\n     *     console.log(e.readyCount, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(\"preReady\", {\n      readyCount: this.readyCount,\n      totalCount: this.totalCount,\n      isReady: this.isReady(),\n      hasLoading: this.hasLoading(),\n    });\n  }\n  private onReadyElement(index: number) {\n    const info = this.elementInfos[index];\n    /**\n     * An event occurs when the element is ready\n     * @ko 해당 엘리먼트가 준비가 되었을 때 이벤트가 발생한다.\n     * @event eg.ImReady#readyElement\n     * @param {eg.ImReady.OnReadyElement} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   readyElement: e => {\n     *     // 1, 0, false, 3\n     *     // 2, 1, false, 3\n     *     // 3, 2, true, 3\n     *     console.log(e.readyCount, e.index, e.hasError, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(\"readyElement\", {\n      index,\n      element: info.element,\n\n      hasError: info.hasError,\n      errorCount: this.getErrorCount(),\n      totalErrorCount: this.totalErrorCount,\n\n      preReadyCount: this.preReadyCount,\n      readyCount: this.readyCount,\n      totalCount: this.totalCount,\n\n      isPreReady: this.isPreReady(),\n      isReady: this.isReady(),\n\n      hasLoading: info.hasLoading,\n      isPreReadyOver: this.isPreReadyOver,\n      isSkip: info.isSkip,\n    });\n  }\n  private onReady() {\n    /**\n     * An event occurs when all element are ready\n     * @ko 모든 엘리먼트들이 준비된 경우 이벤트가 발생한다.\n     * @event eg.ImReady#ready\n     * @param {eg.ImReady.OnReady} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\" data-width=\"1280\" data-height=\"853\"/>\n     *    <img src=\"ERR\" data-width=\"1280\" data-height=\"853\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import ImReady from \"@egjs/imready\";\n     *\n     * const im = new ImReady(); // umd: eg.ImReady\n     * im.check(document.querySelectorAll(\"img\")).on({\n     *   preReady: e => {\n     *     // 0, 3\n     *     console.log(e.readyCount, e.totalCount),\n     *   },\n     *   ready: e => {\n     *     // 1, 3\n     *     console.log(e.errorCount, e.totalCount),\n     *   },\n     * });\n     * ```\n     */\n    this.trigger(\"ready\", {\n      errorCount: this.getErrorCount(),\n      totalErrorCount: this.totalErrorCount,\n      totalCount: this.totalCount,\n    });\n  }\n  private getErrorCount() {\n    return this.elementInfos.filter(info => info.hasError).length;\n  }\n  private hasLoading() {\n    return this.elementInfos.some(info => info.hasLoading);\n  }\n}\n\nexport default ImReadyManager;\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport { IS_IE } from \"../consts\";\nimport Loader from \"./Loader\";\n\nexport default class ImageLoader extends Loader<HTMLImageElement> {\n  public static EVENTS = [\"load\", \"error\"];\n  public checkElement() {\n    const element = this.element;\n    const src = element.getAttribute(\"src\");\n\n    if (element.complete) {\n      if (src) {\n        // complete\n        if (!element.naturalWidth) {\n          this.onAlreadyError(element);\n        }\n        return false;\n      } else {\n        // Using an external lazy loading module\n        this.onAlreadyPreReady();\n      }\n    }\n    this.addEvents();\n    IS_IE && element.setAttribute(\"src\", src!);\n    return true;\n  }\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport Loader from \"./Loader\";\n\nexport default class VideoLoader extends Loader<HTMLVideoElement> {\n  public static EVENTS = [\"loadedmetadata\", \"error\"];\n  public checkElement() {\n    const element = this.element;\n    // HAVE_NOTHING: 0, no information whether or not the audio/video is ready\n    // HAVE_METADATA: 1, HAVE_METADATA - metadata for the audio/video is ready\n    // HAVE_CURRENT_DATA: 2, data for the current playback position is available, but not enough data to play next frame/millisecond\n    // HAVE_FUTURE_DATA: 3, data for the current and at least the next frame is available\n    // HAVE_ENOUGH_DATA: 4, enough data available to start playing\n    if (element.readyState >= 1) {\n      return false;\n    }\n    if (element.error) {\n      this.onAlreadyError(element);\n      return false;\n    }\n    this.addEvents();\n    return true;\n  }\n}\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport ImReadyManager from \"./ImReadyManager\";\nimport ImageLoader from \"./loaders/ImageLoader\";\nimport VideoLoader from \"./loaders/VideoLoader\";\nimport { ImReadyOptions } from \"./types\";\n\nclass ImReady extends ImReadyManager {\n  constructor(options: Partial<ImReadyOptions> = {}) {\n    super({\n      loaders: {\n        img: ImageLoader,\n        video: VideoLoader,\n      },\n      ...options,\n    });\n  }\n}\n\nexport default ImReady;\n","/*\negjs-imready\nCopyright (c) 2020-present NAVER Corp.\nMIT license\n*/\nimport ImReady from \"./ImReady\";\nimport Manager from \"./ImReadyManager\";\nimport Loader from \"./loaders/Loader\";\nimport ImageLoader from \"./loaders/ImageLoader\";\nimport VideoLoader from \"./loaders/VideoLoader\";\n\nexport default ImReady;\nexport {\n  Manager,\n  VideoLoader,\n  ImageLoader,\n  Loader,\n};\nexport {\n  EVENTS,\n  PROPS,\n} from \"./consts\";\nexport * from \"./types\";\n"]},"metadata":{},"sourceType":"module"}