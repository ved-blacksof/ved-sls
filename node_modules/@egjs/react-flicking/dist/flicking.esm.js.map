{"version":3,"file":"flicking.esm.js","sources":["../src/react-flicking/consts.ts","../src/react-flicking/ReactRenderer.ts","../src/react-flicking/StrictPanel.tsx","../src/react-flicking/NonStrictPanel.tsx","../src/react-flicking/ViewportSlot.tsx","../src/react-flicking/ReactElementProvider.ts","../src/react-flicking/Flicking.tsx","../src/react-flicking/index.ts"],"sourcesContent":["/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport {\n  SelectEvent,\n  NeedPanelEvent,\n  VisibleChangeEvent,\n  HoldStartEvent,\n  HoldEndEvent,\n  MoveStartEvent,\n  MoveEvent,\n  MoveEndEvent,\n  WillChangeEvent,\n  ChangedEvent,\n  WillRestoreEvent,\n  RestoredEvent,\n  ReadyEvent,\n  BeforeResizeEvent,\n  AfterResizeEvent,\n  ReachEdgeEvent,\n  PanelChangeEvent\n} from \"@egjs/flicking\";\n\nimport { FlickingProps } from \"./types\";\n\nexport const DEFAULT_PROPS: FlickingProps = {\n  viewportTag: \"div\",\n  cameraTag: \"div\",\n  plugins: [],\n  useFindDOMNode: false,\n  hideBeforeInit: false,\n  onReady: (e: ReadyEvent) => {},\n  onBeforeResize: (e: BeforeResizeEvent) => {},\n  onAfterResize: (e: AfterResizeEvent) => {},\n  onHoldStart: (e: HoldStartEvent) => {},\n  onHoldEnd: (e: HoldEndEvent) => {},\n  onMoveStart: (e: MoveStartEvent) => {},\n  onMove: (e: MoveEvent) => {},\n  onMoveEnd: (e: MoveEndEvent) => {},\n  onWillChange: (e: WillChangeEvent) => {},\n  onChanged: (e: ChangedEvent) => {},\n  onWillRestore: (e: WillRestoreEvent) => {},\n  onRestored: (e: RestoredEvent) => {},\n  onSelect: (e: SelectEvent) => {},\n  onNeedPanel: (e: NeedPanelEvent) => {},\n  onVisibleChange: (e: VisibleChangeEvent) => {},\n  onReachEdge: (e: ReachEdgeEvent) => {},\n  onPanelChange: (e: PanelChangeEvent) => {}\n};\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { ExternalRenderer, PanelOptions, RendererOptions, getFlickingAttached } from \"@egjs/flicking\";\n\nimport ReactFlicking from \"./Flicking\";\nimport StrictPanel from \"./StrictPanel\";\nimport NonStrictPanel from \"./NonStrictPanel\";\n\nexport interface ReactRendererOptions extends RendererOptions {\n  reactFlicking: ReactFlicking;\n}\n\nclass ReactRenderer extends ExternalRenderer {\n  // Internal States\n  protected _reactFlicking: ReactFlicking;\n\n  public constructor(options: ReactRendererOptions) {\n    super(options);\n\n    this._reactFlicking = options.reactFlicking;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/require-await\n  public async render() {\n    const flicking = getFlickingAttached(this._flicking);\n    const reactFlicking = this._reactFlicking;\n    const strategy = this._strategy;\n\n    strategy.updateRenderingPanels(flicking);\n    strategy.renderPanels(flicking);\n\n    return new Promise<void>(resolve => {\n      reactFlicking.renderEmitter.once(\"render\", resolve);\n      reactFlicking.forceUpdate();\n    });\n  }\n\n  public async forceRenderAllPanels() {\n    const reactFlicking = this._reactFlicking;\n\n    await super.forceRenderAllPanels();\n\n    return new Promise<void>(resolve => {\n      reactFlicking.renderEmitter.once(\"render\", resolve);\n      reactFlicking.forceUpdate();\n    });\n  }\n\n  protected _collectPanels() {\n    const flicking = getFlickingAttached(this._flicking);\n    const reactFlicking = this._reactFlicking;\n    const reactPanels = reactFlicking.reactPanels;\n\n    this._panels = this._strategy.collectPanels(flicking, reactPanels);\n  }\n\n  protected _createPanel(externalComponent: StrictPanel | NonStrictPanel | HTMLDivElement, options: PanelOptions) {\n    return this._strategy.createPanel(externalComponent, options);\n  }\n}\n\nexport default ReactRenderer;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport * as React from \"react\";\n\nclass StrictPanel extends React.Component {\n  private _hide: boolean = false;\n\n  private _elRef: React.RefObject<HTMLElement> = React.createRef();\n\n  public get nativeElement() { return this._elRef.current!; }\n  public get rendered() { return !this._hide; }\n\n  public render() {\n    return this._hide\n      ? <></>\n      : this._getElement();\n  }\n\n  public show() {\n    this._hide = false;\n  }\n\n  public hide() {\n    this._hide = true;\n  }\n\n  private _getElement() {\n    return React.cloneElement(React.Children.only(this.props.children) as React.ReactElement, {\n      ref: this._elRef\n    });\n  }\n}\n\nexport default StrictPanel;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport * as React from \"react\";\nimport { findDOMNode } from \"react-dom\";\n\nclass NonStrictPanel extends React.Component {\n  private _hide: boolean = false;\n\n  public get nativeElement() { return findDOMNode(this) as HTMLElement; }\n  public get rendered() { return !this._hide; }\n\n  public render() {\n    return this._hide\n      ? <></>\n      : this.props.children;\n  }\n\n  public show() {\n    this._hide = false;\n  }\n\n  public hide() {\n    this._hide = true;\n  }\n}\n\nexport default NonStrictPanel;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport React from \"react\";\n\nconst ViewportSlot = React.memo(({ children }) => <>{children}</>);\n\nexport default ViewportSlot;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport { ElementProvider } from \"@egjs/flicking\";\nimport StrictPanel from \"./StrictPanel\";\nimport NonStrictPanel from \"./NonStrictPanel\";\n\nclass ReactElementProvider implements ElementProvider {\n  private _el: StrictPanel | NonStrictPanel;\n\n  public get element() { return this._el.nativeElement; }\n  public get rendered() { return this._el.rendered; }\n\n  public constructor(el: StrictPanel | NonStrictPanel) {\n    this._el = el;\n  }\n\n  public show() {\n    this._el.show();\n  }\n\n  public hide() {\n    this._el.hide();\n  }\n}\n\nexport default ReactElementProvider;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport * as React from \"react\";\nimport Component from \"@egjs/component\";\nimport ListDiffer, { diff, DiffResult } from \"@egjs/list-differ\";\nimport VanillaFlicking, {\n  FlickingOptions,\n  VirtualRenderingStrategy,\n  EVENTS,\n  withFlickingMethods,\n  sync,\n  getRenderingPanels,\n  getDefaultCameraTransform,\n  Plugin,\n  range,\n  NormalRenderingStrategy\n} from \"@egjs/flicking\";\n\nimport { DEFAULT_PROPS } from \"./consts\";\nimport { FlickingProps } from \"./types\";\nimport ReactRenderer, { ReactRendererOptions } from \"./ReactRenderer\";\nimport StrictPanel from \"./StrictPanel\";\nimport NonStrictPanel from \"./NonStrictPanel\";\nimport ViewportSlot from \"./ViewportSlot\";\nimport ReactElementProvider from \"./ReactElementProvider\";\n\nenum LifeCycleState {\n  BEFORE_UPDATE,\n  RENDER,\n  UPDATED\n}\n\nclass Flicking extends React.Component<Partial<FlickingProps & FlickingOptions>> {\n  public static defaultProps: FlickingProps = DEFAULT_PROPS;\n\n  @withFlickingMethods private _vanillaFlicking: VanillaFlicking;\n  private _panels: React.RefObject<StrictPanel | NonStrictPanel | HTMLDivElement>[] = [];\n  private _pluginsDiffer: ListDiffer<any>;\n  private _jsxDiffer: ListDiffer<React.ReactElement>;\n  private _viewportElement: HTMLElement;\n  private _diffResult: DiffResult<React.ReactElement> | null;\n  private _renderEmitter = new Component<{ render: void }>();\n  private _currentState: LifeCycleState = LifeCycleState.BEFORE_UPDATE;\n\n  public get reactPanels() { return this._panels.map(panel => panel.current!); }\n  public get renderEmitter() { return this._renderEmitter; }\n\n  public constructor(props: Partial<FlickingProps & FlickingOptions>) {\n    super(props);\n\n    this._panels = this._createPanelRefs(props, this._getChildren());\n  }\n\n  public componentDidMount() {\n    const props = this.props as Required<FlickingProps & FlickingOptions>;\n    const rendererOptions: ReactRendererOptions = {\n      reactFlicking: this,\n      align: props.align,\n      strategy: props.virtual && props.panelsPerView > 0\n        ? new VirtualRenderingStrategy()\n        : new NormalRenderingStrategy({\n          providerCtor: ReactElementProvider\n        })\n    };\n\n    const flicking = new VanillaFlicking(\n      this._viewportElement,\n      {\n        ...props,\n        externalRenderer: new ReactRenderer(rendererOptions)\n      },\n    );\n\n    this._vanillaFlicking = flicking;\n    this._currentState = LifeCycleState.UPDATED;\n\n    const children = this._getChildren();\n    this._jsxDiffer = new ListDiffer(children, panel => panel.key!);\n    this._pluginsDiffer = new ListDiffer<any>();\n\n    this._bindEvents();\n    this._checkPlugins();\n\n    if (props.status) {\n      flicking.setStatus(props.status);\n    }\n  }\n\n  public componentWillUnmount() {\n    this._vanillaFlicking?.destroy();\n  }\n\n  public shouldComponentUpdate(nextProps: this[\"props\"]) {\n    const vanillaFlicking = this._vanillaFlicking;\n    const props = this.props;\n\n    // Ignore updates before init, they will be updated after \"ready\" event's force update\n    if (!vanillaFlicking || !vanillaFlicking.initialized) return false;\n\n    if (this._currentState !== LifeCycleState.BEFORE_UPDATE && props.children !== nextProps.children) {\n      const nextChildren = this._getChildren(nextProps.children);\n\n      this._panels = this._createPanelRefs(nextProps, nextChildren);\n      this._diffResult = this._jsxDiffer.update(nextChildren);\n    }\n\n    this._currentState = LifeCycleState.BEFORE_UPDATE;\n\n    for (const key in nextProps) {\n      if (props[key] !== nextProps[key]) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  public componentDidUpdate() {\n    const flicking = this._vanillaFlicking;\n    const renderEmitter = this._renderEmitter;\n    const diffResult = this._diffResult;\n\n    this._checkPlugins();\n    renderEmitter.trigger(\"render\");\n\n    this._currentState = LifeCycleState.UPDATED;\n\n    if (!diffResult || !flicking.initialized) return;\n\n    sync(flicking, diffResult, this.reactPanels);\n\n    this._diffResult = null;\n  }\n\n  public render() {\n    const props = this.props;\n    const Viewport = props.viewportTag as any;\n    const Camera = props.cameraTag as any;\n    const attributes: { [key: string]: any } = {};\n    const flicking = this._vanillaFlicking;\n\n    this._currentState = LifeCycleState.RENDER;\n\n    for (const name in props) {\n      if (!(name in DEFAULT_PROPS) && !(name in VanillaFlicking.prototype)) {\n        attributes[name] = props[name];\n      }\n    }\n\n    const initialized = flicking && flicking.initialized;\n    const viewportClasses: string[] = [\"flicking-viewport\"];\n    const isHorizontal = flicking\n      ? flicking.horizontal\n      : props.horizontal ?? true;\n\n    if (!isHorizontal) {\n      viewportClasses.push(\"vertical\");\n    }\n    if (props.hideBeforeInit && !initialized) {\n      viewportClasses.push(\"flicking-hidden\");\n    }\n    if (attributes.className) {\n      viewportClasses.push(attributes.className);\n    }\n\n    const cameraProps = !initialized && props.firstPanelSize\n      ? { style: {\n        transform: getDefaultCameraTransform(this.props.align, this.props.horizontal, this.props.firstPanelSize)\n      }}\n      : {};\n\n    const panels = !!props.virtual && (props.panelsPerView ?? -1) > 0\n      ? this._getVirtualPanels()\n      : this._getPanels();\n\n    return (\n      <Viewport {...attributes} className={viewportClasses.join(\" \")} ref={(e?: HTMLElement) => {\n        e && (this._viewportElement = e);\n      }}>\n        <Camera className=\"flicking-camera\" {...cameraProps}>\n          { panels }\n        </Camera>\n        { this._getViewportSlot() }\n      </Viewport>\n    );\n  }\n\n  private _createPanelRefs(props: this[\"props\"], children: Array<React.ReactElement<any>>): React.RefObject<StrictPanel | NonStrictPanel | HTMLDivElement>[] {\n    const panelsPerView = props.panelsPerView ?? -1;\n\n    return panelsPerView > 0 && !!props.virtual\n      ? range(panelsPerView + 1).map(() => React.createRef())\n      : children.map(() => React.createRef());\n  }\n\n  private _bindEvents() {\n    const flicking = this._vanillaFlicking!;\n    const props = this.props as Required<FlickingProps>;\n\n    Object.keys(EVENTS).forEach((eventKey: keyof typeof EVENTS) => {\n      const eventName = EVENTS[eventKey];\n      const propName = `on${eventName.charAt(0).toUpperCase() + eventName.slice(1)}`;\n\n      flicking.on(eventName, e => {\n        e.currentTarget = this;\n\n        props[propName](e);\n      });\n    });\n\n    flicking.once(EVENTS.READY, () => {\n      const children = this._getChildren();\n      const diffResult = this._jsxDiffer.update(children);\n\n      // children is changed before init\n      if (diffResult.added.length > 0 || diffResult.removed.length > 0) {\n        this._panels = this._createPanelRefs(this.props, children);\n        this._diffResult = diffResult;\n      }\n\n      this.forceUpdate();\n    });\n  }\n\n  private _checkPlugins() {\n    const flicking = this._vanillaFlicking;\n    const { list, added, removed, prevList } = this._pluginsDiffer.update(this.props.plugins!) as DiffResult<Plugin>;\n\n    flicking.addPlugins(...added.map(index => list[index]));\n    flicking.removePlugins(...removed.map(index => prevList[index]));\n  }\n\n  private _getChildren(children: React.ReactNode = this.props.children) {\n    return (React.Children.toArray(children) as Array<React.ReactElement<any>>)\n      .filter(child => child.type !== ViewportSlot)\n      .reduce((all, child) => {\n        return [...all, ...this._unpackFragment(child)];\n      }, []) as Array<React.ReactElement<any>>;\n  }\n\n  private _getViewportSlot() {\n    return (React.Children.toArray(this.props.children) as Array<React.ReactElement<any>>)\n      .filter(child => child.type === ViewportSlot);\n  }\n\n  private _unpackFragment(child: React.ReactElement) {\n    return this._isFragment(child)\n      ? React.Children.toArray(child.props.children)\n        .reduce((allChilds, fragChild) => [...allChilds, ...this._unpackFragment(fragChild)], [])\n      : [child];\n  }\n\n  private _getVirtualPanels() {\n    const {\n      panelClass = \"flicking-panel\"\n    } = this.props.virtual!;\n    const panelsPerView = this.props.panelsPerView!;\n    const flicking = this._vanillaFlicking;\n    const initialized = flicking && flicking.initialized;\n\n    const renderingIndexes = initialized\n      ? flicking.renderer.strategy.getRenderingIndexesByOrder(flicking)\n      : range(panelsPerView + 1);\n\n    const firstPanel = flicking && flicking.panels[0];\n    const size = firstPanel\n      ? flicking.horizontal\n        ? { width: firstPanel.size }\n        : { height: firstPanel.size }\n      : {};\n\n    return renderingIndexes.map(idx => {\n      return <div\n        key={idx}\n        data-element-index={idx}\n        ref={this._panels[idx] as React.RefObject<HTMLDivElement>}\n        className={panelClass}\n        style={size} />\n    });\n  }\n\n  private _getPanels() {\n    const origChildren = this._getChildren();\n    const vanillaFlicking = this._vanillaFlicking;\n    const diffResult = this._diffResult;\n\n    const children = vanillaFlicking && vanillaFlicking.initialized\n      ? diffResult\n        ? getRenderingPanels(vanillaFlicking, diffResult)\n        : getRenderingPanels(vanillaFlicking, diff(origChildren, origChildren))\n      : origChildren;\n\n    return this.props.useFindDOMNode\n      ? children.map((child, idx) => <NonStrictPanel key={child.key!} ref={this._panels[idx] as any}>{child}</NonStrictPanel>)\n      : children.map((child, idx) => <StrictPanel key={child.key!} ref={this._panels[idx] as any}>{child}</StrictPanel>)\n  }\n\n  private _isFragment(child: NonNullable<React.ReactNode>) {\n    if ((child as React.ReactElement).type) {\n      return (child as React.ReactElement).type === React.Fragment;\n    }\n    return child === React.Fragment;\n  }\n}\n\ninterface Flicking extends React.Component<Partial<FlickingProps & FlickingOptions>>, VanillaFlicking { }\nexport default Flicking;\n","/*\n * Copyright (c) 2015 NAVER Corp.\n * egjs projects are licensed under the MIT license\n */\nimport Flicking from \"./Flicking\";\nimport ViewportSlot from \"./ViewportSlot\";\n\nexport * from \"@egjs/flicking\";\nexport * from \"./types\";\n\nexport {\n  ViewportSlot\n}\nexport default Flicking;\n"],"names":["DEFAULT_PROPS","viewportTag","cameraTag","plugins","useFindDOMNode","hideBeforeInit","onReady","e","onBeforeResize","onAfterResize","onHoldStart","onHoldEnd","onMoveStart","onMove","onMoveEnd","onWillChange","onChanged","onWillRestore","onRestored","onSelect","onNeedPanel","onVisibleChange","onReachEdge","onPanelChange","__extends","options","_super","_this","_reactFlicking","reactFlicking","flicking","getFlickingAttached","_flicking","strategy","_strategy","updateRenderingPanels","renderPanels","Promise","resolve","renderEmitter","once","forceUpdate","forceRenderAllPanels","_a","reactPanels","_panels","collectPanels","externalComponent","createPanel","ExternalRenderer","React","createRef","Object","_elRef","current","_hide","_getElement","cloneElement","Children","only","props","children","ref","Component","findDOMNode","ViewportSlot","memo","el","_el","nativeElement","rendered","show","hide","LifeCycleState","BEFORE_UPDATE","_createPanelRefs","_getChildren","map","panel","_renderEmitter","rendererOptions","align","virtual","panelsPerView","VirtualRenderingStrategy","NormalRenderingStrategy","providerCtor","ReactElementProvider","VanillaFlicking","_viewportElement","externalRenderer","ReactRenderer","_vanillaFlicking","_currentState","UPDATED","_jsxDiffer","ListDiffer","key","_pluginsDiffer","_bindEvents","_checkPlugins","status","setStatus","destroy","nextProps","vanillaFlicking","initialized","nextChildren","_diffResult","update","diffResult","trigger","sync","Viewport","Camera","attributes","RENDER","name","prototype","viewportClasses","isHorizontal","horizontal","push","className","cameraProps","firstPanelSize","style","transform","getDefaultCameraTransform","panels","_getVirtualPanels","_getPanels","join","_getViewportSlot","range","keys","EVENTS","forEach","eventKey","eventName","propName","charAt","toUpperCase","slice","on","currentTarget","READY","added","length","removed","list","prevList","addPlugins","index","removePlugins","toArray","filter","child","type","reduce","all","_unpackFragment","_isFragment","allChilds","fragChild","panelClass","renderingIndexes","renderer","getRenderingIndexesByOrder","firstPanel","size","width","height","idx","origChildren","getRenderingPanels","diff","NonStrictPanel","StrictPanel","Fragment","Flicking","__decorate","withFlickingMethods"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BO,IAAMA,aAAa,GAAkB;AAC1CC,EAAAA,WAAW,EAAE,KAD6B;AAE1CC,EAAAA,SAAS,EAAE,KAF+B;AAG1CC,EAAAA,OAAO,EAAE,EAHiC;AAI1CC,EAAAA,cAAc,EAAE,KAJ0B;AAK1CC,EAAAA,cAAc,EAAE,KAL0B;AAM1CC,EAAAA,OAAO,EAAE,UAACC,CAAD,IANiC;AAO1CC,EAAAA,cAAc,EAAE,UAACD,CAAD,IAP0B;AAQ1CE,EAAAA,aAAa,EAAE,UAACF,CAAD,IAR2B;AAS1CG,EAAAA,WAAW,EAAE,UAACH,CAAD,IAT6B;AAU1CI,EAAAA,SAAS,EAAE,UAACJ,CAAD,IAV+B;AAW1CK,EAAAA,WAAW,EAAE,UAACL,CAAD,IAX6B;AAY1CM,EAAAA,MAAM,EAAE,UAACN,CAAD,IAZkC;AAa1CO,EAAAA,SAAS,EAAE,UAACP,CAAD,IAb+B;AAc1CQ,EAAAA,YAAY,EAAE,UAACR,CAAD,IAd4B;AAe1CS,EAAAA,SAAS,EAAE,UAACT,CAAD,IAf+B;AAgB1CU,EAAAA,aAAa,EAAE,UAACV,CAAD,IAhB2B;AAiB1CW,EAAAA,UAAU,EAAE,UAACX,CAAD,IAjB8B;AAkB1CY,EAAAA,QAAQ,EAAE,UAACZ,CAAD,IAlBgC;AAmB1Ca,EAAAA,WAAW,EAAE,UAACb,CAAD,IAnB6B;AAoB1Cc,EAAAA,eAAe,EAAE,UAACd,CAAD,IApByB;AAqB1Ce,EAAAA,WAAW,EAAE,UAACf,CAAD,IArB6B;AAsB1CgB,EAAAA,aAAa,EAAE,UAAChB,CAAD;AAtB2B,CAArC;;ACZP;;;AAA4BiB,EAAAA,gCAAA;;AAI1B,wBAAA,CAAmBC,OAAnB;AAAA,gBACEC,WAAA,KAAA,EAAMD,OAAN,SADF;;AAGEE,IAAAA,KAAI,CAACC,cAAL,GAAsBH,OAAO,CAACI,aAA9B;;AACD;;;;;AAGY,gBAAA,GAAb;;;;AACQC,QAAAA,QAAQ,GAAGC,mBAAmB,CAAC,KAAKC,SAAN,CAA9B;AACAH,QAAAA,aAAa,GAAG,KAAKD,cAArB;AACAK,QAAAA,QAAQ,GAAG,KAAKC,SAAhB;AAEND,QAAAA,QAAQ,CAACE,qBAAT,CAA+BL,QAA/B;AACAG,QAAAA,QAAQ,CAACG,YAAT,CAAsBN,QAAtB;AAEA;;UAAO,IAAIO,OAAJ,CAAkB,UAAAC,OAAA;AACvBT,UAAAA,aAAa,CAACU,aAAd,CAA4BC,IAA5B,CAAiC,QAAjC,EAA2CF,OAA3C;AACAT,UAAAA,aAAa,CAACY,WAAd;AACD,SAHM,EAAP;;;AAID,GAZY;;AAcA,8BAAA,GAAb;;;;;;AACQZ,YAAAA,aAAa,GAAG,KAAKD,cAArB;AAEN;;cAAMF,gBAAA,CAAMgB,oBAAN,KAAA,KAAA,EAAN;;;AAAAC,YAAAA,OAAA;;AAEA;;cAAO,IAAIN,OAAJ,CAAkB,UAAAC,OAAA;AACvBT,cAAAA,aAAa,CAACU,aAAd,CAA4BC,IAA5B,CAAiC,QAAjC,EAA2CF,OAA3C;AACAT,cAAAA,aAAa,CAACY,WAAd;AACD,aAHM,EAAP;;;;AAID,GATY;;AAWH,wBAAA,GAAV;AACE,QAAMX,QAAQ,GAAGC,mBAAmB,CAAC,KAAKC,SAAN,CAApC;AACA,QAAMH,aAAa,GAAG,KAAKD,cAA3B;AACA,QAAMgB,WAAW,GAAGf,aAAa,CAACe,WAAlC;AAEA,SAAKC,OAAL,GAAe,KAAKX,SAAL,CAAeY,aAAf,CAA6BhB,QAA7B,EAAuCc,WAAvC,CAAf;AACD,GANS;;AAQA,sBAAA,GAAV,UAAuBG,iBAAvB,EAAyFtB,OAAzF;AACE,WAAO,KAAKS,SAAL,CAAec,WAAf,CAA2BD,iBAA3B,EAA8CtB,OAA9C,CAAP;AACD,GAFS;;AAGZ,sBAAA;AA/CA,EAA4BwB,iBAA5B;;ACRA;;;AAA0BzB,EAAAA,8BAAA;;AAA1B,sBAAA;AAAA,wEAAA;;AACUG,IAAAA,WAAA,GAAiB,KAAjB;AAEAA,IAAAA,YAAA,GAAuCuB,KAAK,CAACC,SAAN,EAAvC;;AAwBT;;;AAtBCC,EAAAA,qBAAA,yBAAA;SAAA;AAA6B,aAAO,KAAKC,MAAL,CAAYC,OAAnB;AAA8B;;;GAA3D;AACAF,EAAAA,qBAAA,oBAAA;SAAA;AAAwB,aAAO,CAAC,KAAKG,KAAb;AAAqB;;;GAA7C;;AAEO,gBAAA,GAAP;AACE,WAAO,KAAKA,KAAL,GACHL,mBAAA,eAAA,MAAA,CADG,GAEH,KAAKM,WAAL,EAFJ;AAGD,GAJM;;AAMA,cAAA,GAAP;AACE,SAAKD,KAAL,GAAa,KAAb;AACD,GAFM;;AAIA,cAAA,GAAP;AACE,SAAKA,KAAL,GAAa,IAAb;AACD,GAFM;;AAIC,qBAAA,GAAR;AACE,WAAOL,KAAK,CAACO,YAAN,CAAmBP,KAAK,CAACQ,QAAN,CAAeC,IAAf,CAAoB,KAAKC,KAAL,CAAWC,QAA/B,CAAnB,EAAmF;AACxFC,MAAAA,GAAG,EAAE,KAAKT;AAD8E,KAAnF,CAAP;AAGD,GAJO;;AAKV,oBAAA;AAAC,EA3ByBH,KAAK,CAACa,UAAhC;;ACCA;;;AAA6BvC,EAAAA,iCAAA;;AAA7B,yBAAA;AAAA,wEAAA;;AACUG,IAAAA,WAAA,GAAiB,KAAjB;;AAkBT;;;AAhBCyB,EAAAA,qBAAA,yBAAA;SAAA;AAA6B,aAAOY,WAAW,CAAC,IAAD,CAAlB;AAA0C;;;GAAvE;AACAZ,EAAAA,qBAAA,oBAAA;SAAA;AAAwB,aAAO,CAAC,KAAKG,KAAb;AAAqB;;;GAA7C;;AAEO,gBAAA,GAAP;AACE,WAAO,KAAKA,KAAL,GACHL,mBAAA,eAAA,MAAA,CADG,GAEH,KAAKU,KAAL,CAAWC,QAFf;AAGD,GAJM;;AAMA,cAAA,GAAP;AACE,SAAKN,KAAL,GAAa,KAAb;AACD,GAFM;;AAIA,cAAA,GAAP;AACE,SAAKA,KAAL,GAAa,IAAb;AACD,GAFM;;AAGT,uBAAA;AAAC,EAnB4BL,KAAK,CAACa,UAAnC;;ACPA;;;;IAMME,YAAY,GAAGf,cAAK,CAACgB,IAAN,CAAW,UAACvB,EAAD;MAAGkB,QAAQ;AAAO,SAAAX,4BAAA,wBAAA,MAAA,EAAGW,QAAH,CAAA;AAAe,CAA5C;;ACErB;;;AAME,+BAAA,CAAmBM,EAAnB;AACE,SAAKC,GAAL,GAAWD,EAAX;AACD;;;AALDf,EAAAA,qBAAA,mBAAA;SAAA;AAAuB,aAAO,KAAKgB,GAAL,CAASC,aAAhB;AAAgC;;;GAAvD;AACAjB,EAAAA,qBAAA,oBAAA;SAAA;AAAwB,aAAO,KAAKgB,GAAL,CAASE,QAAhB;AAA2B;;;GAAnD;;AAMO,cAAA,GAAP;AACE,SAAKF,GAAL,CAASG,IAAT;AACD,GAFM;;AAIA,cAAA,GAAP;AACE,SAAKH,GAAL,CAASI,IAAT;AACD,GAFM;;AAGT,6BAAA;AAAC,GAjBD;;ACoBA,IAAKC,cAAL;;AAAA,WAAKA;AACHA,EAAAA,mDAAA,kBAAA;AACAA,EAAAA,4CAAA,WAAA;AACAA,EAAAA,6CAAA,YAAA;AACD,CAJD,EAAKA,cAAc,KAAdA,cAAc,KAAA,CAAnB;;;;;AAMuBjD,EAAAA,2BAAA;;AAerB,mBAAA,CAAmBoC,KAAnB;AAAA,gBACElC,WAAA,KAAA,EAAMkC,KAAN,SADF;;AAXQjC,IAAAA,aAAA,GAA4E,EAA5E;AAKAA,IAAAA,oBAAA,GAAiB,IAAIoC,SAAJ,EAAjB;AACApC,IAAAA,mBAAA,GAAgC8C,cAAc,CAACC,aAA/C;AAQN/C,IAAAA,KAAI,CAACkB,OAAL,GAAelB,KAAI,CAACgD,gBAAL,CAAsBf,KAAtB,EAA6BjC,KAAI,CAACiD,YAAL,EAA7B,CAAf;;AACD;;;AAPDxB,EAAAA,qBAAA,uBAAA;SAAA;AAA2B,aAAO,KAAKP,OAAL,CAAagC,GAAb,CAAiB,UAAAC,KAAA;AAAS,eAAAA,KAAK,CAACxB,OAAN;AAAc,OAAxC,CAAP;AAAmD;;;GAA9E;AACAF,EAAAA,qBAAA,yBAAA;SAAA;AAA6B,aAAO,KAAK2B,cAAZ;AAA6B;;;GAA1D;;AAQO,2BAAA,GAAP;AACE,QAAMnB,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAMoB,eAAe,GAAyB;AAC5CnD,MAAAA,aAAa,EAAE,IAD6B;AAE5CoD,MAAAA,KAAK,EAAErB,KAAK,CAACqB,KAF+B;AAG5ChD,MAAAA,QAAQ,EAAE2B,KAAK,CAACsB,OAAN,IAAiBtB,KAAK,CAACuB,aAAN,GAAsB,CAAvC,GACN,IAAIC,wBAAJ,EADM,GAEN,IAAIC,uBAAJ,CAA4B;AAC5BC,QAAAA,YAAY,EAAEC;AADc,OAA5B;AALwC,KAA9C;AAUA,QAAMzD,QAAQ,GAAG,IAAI0D,wBAAJ,CACf,KAAKC,gBADU,wBAGV7B;AACH8B,MAAAA,gBAAgB,EAAE,IAAIC,aAAJ,CAAkBX,eAAlB;MAJL,CAAjB;AAQA,SAAKY,gBAAL,GAAwB9D,QAAxB;AACA,SAAK+D,aAAL,GAAqBpB,cAAc,CAACqB,OAApC;;AAEA,QAAMjC,QAAQ,GAAG,KAAKe,YAAL,EAAjB;;AACA,SAAKmB,UAAL,GAAkB,IAAIC,UAAJ,CAAenC,QAAf,EAAyB,UAAAiB,KAAA;AAAS,aAAAA,KAAK,CAACmB,GAAN;AAAU,KAA5C,CAAlB;AACA,SAAKC,cAAL,GAAsB,IAAIF,UAAJ,EAAtB;;AAEA,SAAKG,WAAL;;AACA,SAAKC,aAAL;;AAEA,QAAIxC,KAAK,CAACyC,MAAV,EAAkB;AAChBvE,MAAAA,QAAQ,CAACwE,SAAT,CAAmB1C,KAAK,CAACyC,MAAzB;AACD;AACF,GAjCM;;AAmCA,8BAAA,GAAP;;;AACE,UAAA,KAAKT,gBAAL,UAAA,iBAAA,SAAA,MAAuBW,SAAvB;AACD,GAFM;;AAIA,+BAAA,GAAP,UAA6BC,SAA7B;AACE,QAAMC,eAAe,GAAG,KAAKb,gBAA7B;AACA,QAAMhC,KAAK,GAAG,KAAKA,KAAnB;;AAGA,QAAI,CAAC6C,eAAD,IAAoB,CAACA,eAAe,CAACC,WAAzC,EAAsD,OAAO,KAAP;;AAEtD,QAAI,KAAKb,aAAL,KAAuBpB,cAAc,CAACC,aAAtC,IAAuDd,KAAK,CAACC,QAAN,KAAmB2C,SAAS,CAAC3C,QAAxF,EAAkG;AAChG,UAAM8C,YAAY,GAAG,KAAK/B,YAAL,CAAkB4B,SAAS,CAAC3C,QAA5B,CAArB;;AAEA,WAAKhB,OAAL,GAAe,KAAK8B,gBAAL,CAAsB6B,SAAtB,EAAiCG,YAAjC,CAAf;AACA,WAAKC,WAAL,GAAmB,KAAKb,UAAL,CAAgBc,MAAhB,CAAuBF,YAAvB,CAAnB;AACD;;AAED,SAAKd,aAAL,GAAqBpB,cAAc,CAACC,aAApC;;AAEA,SAAK,IAAMuB,GAAX,IAAkBO,SAAlB,EAA6B;AAC3B,UAAI5C,KAAK,CAACqC,GAAD,CAAL,KAAeO,SAAS,CAACP,GAAD,CAA5B,EAAmC;AACjC,eAAO,IAAP;AACD;AACF;;AAED,WAAO,KAAP;AACD,GAvBM;;AAyBA,4BAAA,GAAP;AACE,QAAMnE,QAAQ,GAAG,KAAK8D,gBAAtB;AACA,QAAMrD,aAAa,GAAG,KAAKwC,cAA3B;AACA,QAAM+B,UAAU,GAAG,KAAKF,WAAxB;;AAEA,SAAKR,aAAL;;AACA7D,IAAAA,aAAa,CAACwE,OAAd,CAAsB,QAAtB;AAEA,SAAKlB,aAAL,GAAqBpB,cAAc,CAACqB,OAApC;AAEA,QAAI,CAACgB,UAAD,IAAe,CAAChF,QAAQ,CAAC4E,WAA7B,EAA0C;AAE1CM,IAAAA,IAAI,CAAClF,QAAD,EAAWgF,UAAX,EAAuB,KAAKlE,WAA5B,CAAJ;AAEA,SAAKgE,WAAL,GAAmB,IAAnB;AACD,GAfM;;AAiBA,gBAAA,GAAP;AAAA,oBAAA;;;;AACE,QAAMhD,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAMqD,QAAQ,GAAGrD,KAAK,CAAC3D,WAAvB;AACA,QAAMiH,MAAM,GAAGtD,KAAK,CAAC1D,SAArB;AACA,QAAMiH,UAAU,GAA2B,EAA3C;AACA,QAAMrF,QAAQ,GAAG,KAAK8D,gBAAtB;AAEA,SAAKC,aAAL,GAAqBpB,cAAc,CAAC2C,MAApC;;AAEA,SAAK,IAAMC,IAAX,IAAmBzD,KAAnB,EAA0B;AACxB,UAAI,EAAEyD,IAAI,IAAIrH,aAAV,KAA4B,EAAEqH,IAAI,IAAI7B,wBAAe,CAAC8B,SAA1B,CAAhC,EAAsE;AACpEH,QAAAA,UAAU,CAACE,IAAD,CAAV,GAAmBzD,KAAK,CAACyD,IAAD,CAAxB;AACD;AACF;;AAED,QAAMX,WAAW,GAAG5E,QAAQ,IAAIA,QAAQ,CAAC4E,WAAzC;AACA,QAAMa,eAAe,GAAa,CAAC,mBAAD,CAAlC;AACA,QAAMC,YAAY,GAAG1F,QAAQ,GACzBA,QAAQ,CAAC2F,UADgB,GAEzB,MAAA7D,KAAK,CAAC6D,UAAN,UAAA,iBAAA,KAAA,GAAoB,IAFxB;;AAIA,QAAI,CAACD,YAAL,EAAmB;AACjBD,MAAAA,eAAe,CAACG,IAAhB,CAAqB,UAArB;AACD;;AACD,QAAI9D,KAAK,CAACvD,cAAN,IAAwB,CAACqG,WAA7B,EAA0C;AACxCa,MAAAA,eAAe,CAACG,IAAhB,CAAqB,iBAArB;AACD;;AACD,QAAIP,UAAU,CAACQ,SAAf,EAA0B;AACxBJ,MAAAA,eAAe,CAACG,IAAhB,CAAqBP,UAAU,CAACQ,SAAhC;AACD;;AAED,QAAMC,WAAW,GAAG,CAAClB,WAAD,IAAgB9C,KAAK,CAACiE,cAAtB,GAChB;AAAEC,MAAAA,KAAK,EAAE;AACTC,QAAAA,SAAS,EAAEC,yBAAyB,CAAC,KAAKpE,KAAL,CAAWqB,KAAZ,EAAmB,KAAKrB,KAAL,CAAW6D,UAA9B,EAA0C,KAAK7D,KAAL,CAAWiE,cAArD;AAD3B;AAAT,KADgB,GAIhB,EAJJ;AAMA,QAAMI,MAAM,GAAG,CAAC,CAACrE,KAAK,CAACsB,OAAR,IAAmB,CAAC,MAAAtB,KAAK,CAACuB,aAAN,UAAA,iBAAA,KAAA,GAAuB,CAAC,CAAzB,IAA8B,CAAjD,GACX,KAAK+C,iBAAL,EADW,GAEX,KAAKC,UAAL,EAFJ;AAIA,WACEjF,mBAAA,CAAC+D,QAAD,eAAcE;AAAYQ,MAAAA,SAAS,EAAEJ,eAAe,CAACa,IAAhB,CAAqB,GAArB;AAA2BtE,MAAAA,GAAG,EAAE,UAACvD,CAAD;AACnEA,QAAAA,CAAC,KAAKoB,KAAI,CAAC8D,gBAAL,GAAwBlF,CAA7B,CAAD;AACD;MAFD,EAGE2C,mBAAA,CAACgE,MAAD;AAAQS,MAAAA,SAAS,EAAC;OAAsBC,YAAxC,EACIK,MADJ,CAHF,EAMI,KAAKI,gBAAL,EANJ,CADF;AAUD,GAnDM;;AAqDC,0BAAA,GAAR,UAAyBzE,KAAzB,EAA+CC,QAA/C;;;AACE,QAAMsB,aAAa,GAAG,MAAAvB,KAAK,CAACuB,aAAN,UAAA,iBAAA,KAAA,GAAuB,CAAC,CAA9C;AAEA,WAAOA,aAAa,GAAG,CAAhB,IAAqB,CAAC,CAACvB,KAAK,CAACsB,OAA7B,GACHoD,KAAK,CAACnD,aAAa,GAAG,CAAjB,CAAL,CAAyBN,GAAzB,CAA6B;AAAM,aAAA3B,KAAK,CAACC,SAAN,EAAA;AAAiB,KAApD,CADG,GAEHU,QAAQ,CAACgB,GAAT,CAAa;AAAM,aAAA3B,KAAK,CAACC,SAAN,EAAA;AAAiB,KAApC,CAFJ;AAGD,GANO;;AAQA,qBAAA,GAAR;AAAA,oBAAA;;AACE,QAAMrB,QAAQ,GAAG,KAAK8D,gBAAtB;AACA,QAAMhC,KAAK,GAAG,KAAKA,KAAnB;AAEAR,IAAAA,MAAM,CAACmF,IAAP,CAAYC,MAAZ,EAAoBC,OAApB,CAA4B,UAACC,QAAD;AAC1B,UAAMC,SAAS,GAAGH,MAAM,CAACE,QAAD,CAAxB;AACA,UAAME,QAAQ,GAAG,WAAA,CAAKD,SAAS,CAACE,MAAV,CAAiB,CAAjB,EAAoBC,WAApB,KAAoCH,SAAS,CAACI,KAAV,CAAgB,CAAhB,CAAzC,CAAjB;AAEAjH,MAAAA,QAAQ,CAACkH,EAAT,CAAYL,SAAZ,EAAuB,UAAApI,CAAA;AACrBA,QAAAA,CAAC,CAAC0I,aAAF,GAAkBtH,KAAlB;AAEAiC,QAAAA,KAAK,CAACgF,QAAD,CAAL,CAAgBrI,CAAhB;AACD,OAJD;AAKD,KATD;AAWAuB,IAAAA,QAAQ,CAACU,IAAT,CAAcgG,MAAM,CAACU,KAArB,EAA4B;AAC1B,UAAMrF,QAAQ,GAAGlC,KAAI,CAACiD,YAAL,EAAjB;;AACA,UAAMkC,UAAU,GAAGnF,KAAI,CAACoE,UAAL,CAAgBc,MAAhB,CAAuBhD,QAAvB,CAAnB;;;AAGA,UAAIiD,UAAU,CAACqC,KAAX,CAAiBC,MAAjB,GAA0B,CAA1B,IAA+BtC,UAAU,CAACuC,OAAX,CAAmBD,MAAnB,GAA4B,CAA/D,EAAkE;AAChEzH,QAAAA,KAAI,CAACkB,OAAL,GAAelB,KAAI,CAACgD,gBAAL,CAAsBhD,KAAI,CAACiC,KAA3B,EAAkCC,QAAlC,CAAf;AACAlC,QAAAA,KAAI,CAACiF,WAAL,GAAmBE,UAAnB;AACD;;AAEDnF,MAAAA,KAAI,CAACc,WAAL;AACD,KAXD;AAYD,GA3BO;;AA6BA,uBAAA,GAAR;AACE,QAAMX,QAAQ,GAAG,KAAK8D,gBAAtB;;AACM,QAAAjD,KAAqC,KAAKuD,cAAL,CAAoBW,MAApB,CAA2B,KAAKjD,KAAL,CAAWzD,OAAtC,CAArC;AAAA,QAAEmJ,IAAI,UAAN;AAAA,QAAQH,KAAK,WAAb;AAAA,QAAeE,OAAO,aAAtB;AAAA,QAAwBE,QAAQ,cAAhC;;AAENzH,IAAAA,QAAQ,CAAC0H,UAAT,MAAA,CAAA1H,QAAA,EAAuBqH,KAAK,CAACtE,GAAN,CAAU,UAAA4E,KAAA;AAAS,aAAAH,IAAI,CAACG,KAAD,CAAJ;AAAW,KAA9B,CAAvB;AACA3H,IAAAA,QAAQ,CAAC4H,aAAT,MAAA,CAAA5H,QAAA,EAA0BuH,OAAO,CAACxE,GAAR,CAAY,UAAA4E,KAAA;AAAS,aAAAF,QAAQ,CAACE,KAAD,CAAR;AAAe,KAApC,CAA1B;AACD,GANO;;AAQA,sBAAA,GAAR,UAAqB5F,QAArB;AAAA,oBAAA;;AAAqB,2BAAA,EAAA;AAAAA,MAAAA,WAA4B,KAAKD,KAAL,CAAWC,QAAvC;;;AACnB,WAAQX,KAAK,CAACQ,QAAN,CAAeiG,OAAf,CAAuB9F,QAAvB,EACL+F,MADK,CACE,UAAAC,KAAA;AAAS,aAAAA,KAAK,CAACC,IAAN,KAAe7F,YAAf;AAA2B,KADtC,EAEL8F,MAFK,CAEE,UAACC,GAAD,EAAMH,KAAN;AACN,6CAAWG,YAAQrI,KAAI,CAACsI,eAAL,CAAqBJ,KAArB,QAAnB;AACD,KAJK,EAIH,EAJG,CAAR;AAKD,GANO;;AAQA,0BAAA,GAAR;AACE,WAAQ3G,KAAK,CAACQ,QAAN,CAAeiG,OAAf,CAAuB,KAAK/F,KAAL,CAAWC,QAAlC,EACL+F,MADK,CACE,UAAAC,KAAA;AAAS,aAAAA,KAAK,CAACC,IAAN,KAAe7F,YAAf;AAA2B,KADtC,CAAR;AAED,GAHO;;AAKA,yBAAA,GAAR,UAAwB4F,KAAxB;AAAA,oBAAA;;AACE,WAAO,KAAKK,WAAL,CAAiBL,KAAjB,IACH3G,KAAK,CAACQ,QAAN,CAAeiG,OAAf,CAAuBE,KAAK,CAACjG,KAAN,CAAYC,QAAnC,EACCkG,MADD,CACQ,UAACI,SAAD,EAAYC,SAAZ;AAA0B,6CAAID,kBAAcxI,KAAI,CAACsI,eAAL,CAAqBG,SAArB,QAAlB;AAAkD,KADpF,EACsF,EADtF,CADG,GAGH,CAACP,KAAD,CAHJ;AAID,GALO;;AAOA,2BAAA,GAAR;AAAA,oBAAA;;AAEI,QAAAlH,KACE,KAAKiB,KAAL,CAAWsB,OAAX,WADF;AAAA,QAAAmF,UAAU,mBAAG,qBAAb;AAEF,QAAMlF,aAAa,GAAG,KAAKvB,KAAL,CAAWuB,aAAjC;AACA,QAAMrD,QAAQ,GAAG,KAAK8D,gBAAtB;AACA,QAAMc,WAAW,GAAG5E,QAAQ,IAAIA,QAAQ,CAAC4E,WAAzC;AAEA,QAAM4D,gBAAgB,GAAG5D,WAAW,GAChC5E,QAAQ,CAACyI,QAAT,CAAkBtI,QAAlB,CAA2BuI,0BAA3B,CAAsD1I,QAAtD,CADgC,GAEhCwG,KAAK,CAACnD,aAAa,GAAG,CAAjB,CAFT;AAIA,QAAMsF,UAAU,GAAG3I,QAAQ,IAAIA,QAAQ,CAACmG,MAAT,CAAgB,CAAhB,CAA/B;AACA,QAAMyC,IAAI,GAAGD,UAAU,GACnB3I,QAAQ,CAAC2F,UAAT,GACE;AAAEkD,MAAAA,KAAK,EAAEF,UAAU,CAACC;AAApB,KADF,GAEE;AAAEE,MAAAA,MAAM,EAAEH,UAAU,CAACC;AAArB,KAHiB,GAInB,EAJJ;AAMA,WAAOJ,gBAAgB,CAACzF,GAAjB,CAAqB,UAAAgG,GAAA;AAC1B,aAAO3H,mBAAA,MAAA;AACL+C,QAAAA,GAAG,EAAE4E;8BACeA;AACpB/G,QAAAA,GAAG,EAAEnC,KAAI,CAACkB,OAAL,CAAagI,GAAb;AACLlD,QAAAA,SAAS,EAAE0C;AACXvC,QAAAA,KAAK,EAAE4C;OALF,CAAP;AAMD,KAPM,CAAP;AAQD,GA3BO;;AA6BA,oBAAA,GAAR;AAAA,oBAAA;;AACE,QAAMI,YAAY,GAAG,KAAKlG,YAAL,EAArB;;AACA,QAAM6B,eAAe,GAAG,KAAKb,gBAA7B;AACA,QAAMkB,UAAU,GAAG,KAAKF,WAAxB;AAEA,QAAM/C,QAAQ,GAAG4C,eAAe,IAAIA,eAAe,CAACC,WAAnC,GACbI,UAAU,GACRiE,kBAAkB,CAACtE,eAAD,EAAkBK,UAAlB,CADV,GAERiE,kBAAkB,CAACtE,eAAD,EAAkBuE,IAAI,CAACF,YAAD,EAAeA,YAAf,CAAtB,CAHP,GAIbA,YAJJ;AAMA,WAAO,KAAKlH,KAAL,CAAWxD,cAAX,GACHyD,QAAQ,CAACgB,GAAT,CAAa,UAACgF,KAAD,EAAQgB,GAAR;AAAgB,aAAA3H,mBAAA,CAAC+H,cAAD;AAAgBhF,QAAAA,GAAG,EAAE4D,KAAK,CAAC5D;AAAMnC,QAAAA,GAAG,EAAEnC,KAAI,CAACkB,OAAL,CAAagI,GAAb;OAAtC,EAAiEhB,KAAjE,CAAA;AAAwF,KAArH,CADG,GAEHhG,QAAQ,CAACgB,GAAT,CAAa,UAACgF,KAAD,EAAQgB,GAAR;AAAgB,aAAA3H,mBAAA,CAACgI,WAAD;AAAajF,QAAAA,GAAG,EAAE4D,KAAK,CAAC5D;AAAMnC,QAAAA,GAAG,EAAEnC,KAAI,CAACkB,OAAL,CAAagI,GAAb;OAAnC,EAA8DhB,KAA9D,CAAA;AAAkF,KAA/G,CAFJ;AAGD,GAdO;;AAgBA,qBAAA,GAAR,UAAoBA,KAApB;AACE,QAAKA,KAA4B,CAACC,IAAlC,EAAwC;AACtC,aAAQD,KAA4B,CAACC,IAA7B,KAAsC5G,KAAK,CAACiI,QAApD;AACD;;AACD,WAAOtB,KAAK,KAAK3G,KAAK,CAACiI,QAAvB;AACD,GALO;;AAxQMC,EAAAA,qBAAA,GAA8BpL,aAA9B;;AAEOqL,EAAAA,YAApBC,qEAAoB;;AA4QvB,iBAAA;AA/QA,EAAuBpI,KAAK,CAACa;;AClC7B;;;;;;;"}